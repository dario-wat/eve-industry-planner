{"version":3,"sources":["components/homepage/EveLoginButton.tsx","assets/eve-sso-login-black-large.png","assets/eve-sso-login-white-small.png","components/homepage/HomePageAppBar.tsx","components/NavigationDrawer.tsx","components/util/CenteredImg.tsx","components/util/EveIcon.tsx","components/util/EveIconAndName.tsx","components/AssetsPage.tsx","contexts/UserContext.ts","components/util/numbers.tsx","components/ContractsPage.tsx","components/IndustryJobsPage.tsx","components/dashboard/DashboardProductionPlanCard.tsx","recoil/atoms.ts","components/dashboard/useProductionPlanState.ts","../../shared/src/lib/util.js","components/dashboard/products_card/DashboardProductsTextArea.tsx","components/util/ItemAutocomplete.tsx","components/dashboard/products_card/DashboardProductsDataGrid.tsx","components/dashboard/products_card/DashboardProducts.tsx","components/dashboard/DashboardProductsCard.tsx","components/dashboard/DashboardScribblesCard.tsx","components/dashboard/DashboardConfigurationCard.tsx","components/dashboard/DashboardPage.tsx","components/market_transactions/AllMarketTransactionsDataGrid.tsx","components/market_transactions/AggregatedTransactionsDataGrid.tsx","components/market_transactions/transactionAggregate.ts","components/market_transactions/MarketTransactionsPage.tsx","components/market_transactions/OverallTransactionDataGrid.tsx","components/MarketOrdersPage.tsx","components/MarketComparisonPage.tsx","components/CharactersPage.tsx","components/market_predictions/MarketItemScores.ts","components/market_predictions/MarketItemHistoryDataTab.tsx","components/market_predictions/MarketabilityTab.tsx","components/market_predictions/MarketPredictionPage.tsx","components/homepage/HomePage.tsx","theme/createAppTheme.ts","App.tsx","index.tsx"],"names":["EveLoginButton","useBlack","useAxios","data","eveLoginImage","href","Box","display","justifyContent","src","alt","HomePageAppBar","AppBar","position","sx","zIndex","theme","drawer","Toolbar","mr","Typography","variant","component","flexGrow","xs","sm","SmallerListItemIcon","withStyles","root","minWidth","marginRight","ListItemIcon","NavigationDrawer","props","routes","navigate","useNavigate","location","useLocation","Drawer","width","flexShrink","boxSizing","height","flexDirection","overflow","List","map","route","ListItem","disablePadding","onClick","_","path","ListItemButton","selected","pathname","icon","ListItemText","primary","label","Divider","ClearCacheButtonListItem","LogoutButtonListItem","onClearCacheClick","axios","delete","status","window","reload","onLogoutClick","CenteredImg","alignItems","EveIcon","imgSrc","categoryId","typeId","size","EveIconAndName","Grid","container","columnSpacing","item","name","AssetsPage","useState","searchText","setSearchText","isIncluded","s","toLowerCase","includes","filteredData","filter","d","columns","field","headerName","sortable","renderCell","params","row","pb","TextField","InputProps","backgroundColor","value","onChange","e","target","Card","CardContent","DataGrid","rows","disableSelectionOnClick","disableColumnMenu","experimentalFeatures","newEditingApi","CircularProgress","defaultUserContextValue","character_ids","character_names","is_logged_in","UserContext","React","createContext","formatNumber","number","fractionDigits","toLocaleString","maximumFractionDigits","minimumFractionDigits","formatNumberScale","toFixed","ColoredNumber","style","color","fontWeight","FINISHED_STATUS","ContractsPage","userContext","useContext","acceptor","assignee","issuer","title","finishedContracts","c","activeContracts","emphasizeSelf","characterId","text","dateField","valueGetter","id","valueFormatter","columnsActive","formatDistanceToNowStrict","Date","addSuffix","columnsFinished","pt","gutterBottom","initialState","sorting","sortModel","sort","hideFooter","SelectedTab","activityColors","activeJobsColumns","product_type_id","category_id","product_name","Math","round","jobHistoryColumns","IndustryJobsPage","ACTIVE","selectedTab","setSelectedTab","Tabs","mb","borderBottom","borderColor","newValue","Tab","HISTORY","ActiveJobs","JobHistory","activeJobs","job","productionPlanAtom","atom","key","default","blueprintRuns","materials","loading","useProductionPlanState","useRecoilState","productionPlan","setProductionPlan","fetchProductionPlan","group","get","DashboardProductionPlanCard","useEffect","RUNS","refreshingAssets","setRefreshingAssets","onRefreshAssetsClick","MATERIALS","LoadingButton","MaterialsTab","BlueprintRunsTab","snackbarOpen","setSnackbarOpen","navigator","clipboard","writeText","m","quantity","join","Snackbar","open","autoHideDuration","message","onClose","action","IconButton","fontSize","groupedData","groupBy","Object","entries","blueprintExists","activeRuns","runs","align","uniqueId","notEmpty","undefined","DashboardProductsTextArea","setText","plannedProducts","pp","isSubmitting","setIsSubmitting","errors","setErrors","onButtonClick","toast","error","autoClose","post","arr","length","onUpdate","RedTextTypography","fullWidth","multiline","placeholder","spacing","first","ItemAutocomplete","autocompleteData","t","Autocomplete","disablePortal","options","filterOptions","createFilterOptions","matchFrom","limit","isOptionEqualToValue","option","renderOption","paddingLeft","paddingTop","paddingBottom","renderInput","verticalAlign","onInputChange","DashboardProductsDataGrid","itemTypeName","setItemTypeName","itemQuantity","setItemQuantity","onDeleteItemClick","onItemDelete","onAddItemClick","typeName","onItemAdd","stock","min","active","pr","event","Button","Number","DashboardProducts","setPlannedProducts","useGrid","setUseGrid","isIsolated","setIsIsolated","isDeleting","setIsDeleting","onDeleteGroupClick","onGroupDelete","onProductChange","FormControlLabel","control","Switch","checked","labelPlacement","ADD_TAB","DashboardProductsCard","refetch","groupedPlannedProducts","productGroups","keys","useDeepCompareEffect","orientation","scrollButtons","p","minHeight","NewGroupTab","setName","DashboardScribblesCard","scribbles","setScribbles","setScribblesFull","newText","index","i","onSaveButtonClick","Scribble","onSave","onDelete","AddScribble","onAdded","addedScribble","isEditMode","setIsEditMode","isSaving","setIsSaving","onDeleteClick","split","l","flex","isAdding","setIsAdding","onAddClick","DashboardConfigurationCard","MaterialStationConfig","assetLocations","loadingAssets","locations","uniq","locationId","a","station_name","locationName","station_id","materialStations","loadingStations","stations","setStations","updatingStations","setUpdatingStations","values","multiple","getOptionLabel","filterSelectedOptions","endAdornment","Fragment","DashboardPage","unitPrice","isBuy","format","AllMarketTransactionsDataGrid","AggregatedTransactionsDataGrid","aggregatedData","transactions","some","buyTransactions","sellTransactions","buyQuantity","sum","sellQuantity","buyVolume","sellVolume","avgBuyPrice","avgSellPrice","avgDiff","gainPerc","OverallTransactionDataGrid","volumePerDay","transaction","date","b","localeCompare","BarChart","xAxis","scaleType","series","ALL_CHARACTERS","MarketTransactionsPage","characterNames","characterName","subDays","startDate","setStartDate","endDate","setEndDate","selectedCharacter","setSelectedCharacter","AGGREGATED","isBefore","isAfter","LocalizationProvider","localeText","enUS","components","MuiLocalizationProvider","defaultProps","dateAdapter","AdapterDateFns","DesktopDatePicker","Select","MenuItem","TRANSACTIONS","OVERALL","MarketOrdersPage","buyOrders","o","sellOrders","volumeRemain","volumeTotal","addDays","issuedDate","duration","unit","MarketComparisonPage","marketExport1","setMarketExport1","marketExport2","setMarketExport2","items1","line","slice","reduce","obj","tuple","items2","buy1","buy2","forEach","itemName1","itemData1","itemData2","price1","parseFloat","replace","price2","isNaN","push","itemName2","readOnly","CharactersPage","character","CharacterCard","CardMedia","pl","image","portrait","createHeuristic","history","recentHistory","mean","h","volume","value_3_days","average","highest","lowest","scoreColumns","MarketItemHistoryDataTab","itemName","setItemName","isLoading","setIsLoading","historyData","setHistoryData","onSubmit","gap","ChartContainer","type","yAxisKey","showMark","yAxis","num","max","BarPlot","LinePlot","ChartsYAxis","axisId","ChartsXAxis","GOOD_AVG_LINE_DIFF","MarketabiltyTab","minDiff","setMinDiff","toString","minPrice","setMinPrice","minIskVolume","setMinIskVolume","rowData","scores","acc","avgPrice","avgIskVolume","MarketPredictionPage","MARKETABILITY","HomePage","createTheme","palette","background","MuiToolbar","styleOverrides","MuiAppBar","MuiDataGrid","autoHeight","density","getRowId","pageSize","rowHeight","rowsPerPageOptions","ThemeProvider","CssBaseline","element","App","Provider","defaults","baseURL","headers","withCredentials","ReactDOM","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.fba115ac.chunk.js","sourcesContent":["import eveLoginImageWhiteSmall from 'assets/eve-sso-login-white-small.png';\r\nimport eveLoginImageBlackLarge from 'assets/eve-sso-login-black-large.png';\r\nimport useAxios from 'axios-hooks';\r\nimport { Box } from '@mui/material';\r\n\r\ntype Props = {\r\n  useBlack?: boolean,\r\n};\r\n\r\nexport default function EveLoginButton(\r\n  { useBlack = false }: Props,\r\n) {\r\n  const [{ data }] = useAxios<string>('/login_url');\r\n\r\n  const eveLoginImage = useBlack\r\n    ? eveLoginImageBlackLarge\r\n    : eveLoginImageWhiteSmall;\r\n  return (\r\n    <a href={data}>\r\n      <Box display=\"flex\" justifyContent=\"center\">\r\n        <img src={eveLoginImage} alt=\"Eve login\" />\r\n      </Box>\r\n    </a>\r\n  );\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAAtCAQAAAD1900CAAAIy0lEQVR42u2ca2wcVxXHf7NeUqF2pxRViLKbVhXQeDYIaD7sOlABEXZAiEfkqGoIqpKCUpJSO03tiqeCIiREiCBxohYoSu0UQZGSOOUl0iSEhwR+fCkt9S5IgKBeoyCMGk+CHGi8lw/3zu68d9be9e7E+a+0O3Pm3HPPOffccx8zs9raBF9fNdDBdawECLTQcwvzVxlkSFv71Ts/fzui1VpHgkaCckx0jTeS/JmXt2rvFG/ln63WJSJeyxrO8/pWq7ECoPEGCn9PJrjQak0iQ2aN5cocWlvlqOXVRjALdyTayQG1oNVJXxrayzPLrc0CkCi32uq64K9tMx3XnMCLA8ok2yt5hkOw/Mk+Pt5pNDQSrVbhOtoXyTj1DUF5EZkjTrlx8WiGlUkRI9eJRa1W4mPfUtB4K0XcModYIXmgPZAMWgEsBc1qwDJltCbo2/6Wt8ISSDRjqdY8B7X7INje2tVrS1LEaiUvSMRK3/hCo0nDSrMgt8/jo2/ckQxLhBMRBPyGx3iIbQDs5HlfnnV8C4BjPMEB3hNBah54BzkmecFBvx4YywfRmE2wEWYBeNRXXIIBAGYZrktqmr+iOyhl4jUIxh1JeYvFjeizbsECl3icLwN38RFGPRwf4y0APM5lok7ZFoBpdEyHdoIFNF99JdJ0A+eYsdFydJMBJjiFqWi95NAxmXRp20uKS4ySwwCKTAI5DC75WOWGQR/wkIO2zaONpZNhOzuHTq7CadmQJ2XjOeYq77XJiV5SFJmkD4NzEbT3QiNwWLFTv8OvQ4RcBuBn3EsW2MUZRbGQUg4r8FMbtchXaqr3ex+tRGjuSNMHFG3N0csXbA79DCbQpwZB6CblcHs3OSYZVQ1d5H5ko09GcG+KnDp6ghxHOAYebSxI+VVfSE4Zgt30AaforsgDZ3D42eRGNzmOMIlBLtLkwA+CpAgZxweU8rWf+ChzgGHgFnbwDceVHbwOgAOqxx/lx8Ar/HER6i7U2OcQ6rvK8TBwls9i8H0MNjGCwTbgMCPsp4dtjqFOqNJSjsFtzFRotVBgF3JO5CzhV1bKP6zOplX43EQZ6ASKXEQAM5ys+LcKr03+nhCUGUKntKiZmibvygbjHwDczM0hPJeVaS9wmg8CWzjJ3ypX7+Q+AH5emVi+wqsArAlV7U8B9PrMzKMDo0CRCfLkGSEPwAgwSg86aZ+ebaHH43iDvCrdi47JKLAdOAsYwATbyQB5dQ10+jGYYdhTj122pR1kkLkEoOTT8H429aJTJE0PJqOOTGGgAzO+HNvJAxOMBgxNifDVyjMRGuBXPKqOhtjADXQwyMOVq4N0AFcqvQQGeF8Eqet8qfXuPxrK8Zb7DUUrKsq6kLIzpNns0zj9wFlm+BKoAJCUDP3ACP2AXG3J4PiimlSn2RVSW1FpJ/Ur1GlTD3lMVU+ej9oau4c8h5nw4dhPjzrLB2gmSFgjud8nGizuCypFv4t3K8o9rAdgmAuLlOn8lNVd2XCN3fpXj3UEOmCG2it/SxRJ0+nSp6AaOq3kpckBJqVK3TspAicZUpST3M1hIO+pZ7v6WHL1yryloHjSiqO3hk0yvN7LVkCn02UJPhyd9ABb2Qrk6QzwRnLpT3NXyw+ziTcCg4zzKq9hEIALjDToTqpggbD1TjU4JMoOqtNdm9kIwJCnn1rlz2CwmZJLH9lbBWCi8ybSQNEWmOM8AJQqUscRTLlkyKN+dfYUVq7oxADMStmM4pnghMdG9/c4c8w59Hf/2jnkgFLAGtD8clWNu7L3RGjGq7byVzjIfuAOtvA0H+d2AL7JFRv/50hGkBocHFGyj8WheWRZN/0Fupp9pFyNVnXpCXbTwzA46hwnT4osMMxusoomHBKctbr7sYUhG32aEhmypLHyhgBKakJqesp6bXLWKAJ+7TD4NtYw5e/T0Oc5NgDwPC/XbA4Lp9nC3cCn+R0PqtLPOWp4G7cBs/w2sswqyq6hyT0HcWeOoF4GgqMc5UXwCTaLMscZNqqRucozDWQpAc+xW034pj3u9xsA3OFy1GFFgQwGGeyhVqrweG30frvrDvp12lwA5nxjQJAMm//LvYgfMOlzzWqYf/EHh8D9PIPGTTzNjYDga66KP8EG4C/cQBjOB9BFyJkXckjIUEKuAkpAgS7V32tjnI0e3gKQRc4zTDLohE8ga0MouRvJkK0pTdq0mmmbTYtDQXXfINRYykrIaUsQfsluV5U/YhNwIwDPVpZlTryZQ6F1vj1Q4Xq2z6XjujgBdCHdbgI6XYzTVbP8Gfb6yDRVeRloUFpCA9n9hgrEKMGRZ9pmU/2QXgD4IVkeZNyHR3Pfla3/YRXvJs8helRo/IdDnqvR5JcDqAuhG1JS9pPq7CBHGWM9j5AiSwY4TpnTPALs5Tif8uhv3wQTlLnIce712DjFemCKMlN0qSOrbuvok6Q4WJFfvWbX80WbnjCmzgpcrPB0VXh2VK6/5GOTd9tNBPxaHKfZS5YHkAH5ko9PNSARlqgvR/jMe8TOVprnSf7tuTofSWoQgu+r+GOAMXT28AFM9jEGlNgHZNiDyfGa5ccDaSZWL3b33ROY6JGHrqrnZfOP1eT02iTL1wOTfZjsYQ+wL2ATTKCtEY1/O2EVP2E103xY7YY2CkluZc4nHMOxmgxOp+usJUoztBLhOdxrU/2QXpgKCA2N+eYEB7yfI/TxiwZL7eBWLvLfJugbHdfOU6K17JynYe/KOieK5znU8NCAxT/s07inQNohNJbnmRaBdpeIz+MzHdzCpRZnjnoR10yjcSVur0PWt5RdLoTpFLfQsNsSq79gkG+utB/i5UOJoIC27+PG7o23dn9zJS6I4sWYBcfVFRUcrZ6vxCw4yivqD+NabWms3rIvR7xlHye078sWDXpvZTkVrncDPUhOu6BdQwNiOKw0St/4WN06xOoP40Sb7nPUb0ccUCb5v+9p99f6c+vmjIuLk3ptTEjb3wYBj2mrV3FK+1Djla1vGdbqRdu1j7o9/F12/h8TB8xJk2exoQAAAABJRU5ErkJggg==\"","export default \"data:image/png;base64,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\"","import AppBar from '@mui/material/AppBar';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport Typography from '@mui/material/Typography';\r\nimport ExtensionIcon from '@mui/icons-material/Extension';\r\nimport EveLoginButton from 'components/homepage/EveLoginButton';\r\n\r\nexport default function HomePageAppBar() {\r\n  return (\r\n    <AppBar\r\n      position=\"fixed\"\r\n      sx={{ zIndex: (theme) => theme.zIndex.drawer + 1 }}>\r\n      <Toolbar sx={{ justifyContent: 'space-between' }}>\r\n        <ExtensionIcon sx={{ mr: 2 }} />\r\n        <Typography variant=\"h6\" component=\"div\"\r\n          sx={{ flexGrow: 1, display: { xs: 'none', sm: 'block' } }}>\r\n          Eve Industry Planner\r\n        </Typography>\r\n        <EveLoginButton />\r\n      </Toolbar>\r\n    </AppBar >\r\n  );\r\n}","import Box from '@mui/material/Box';\r\nimport Drawer from '@mui/material/Drawer';\r\nimport Divider from '@mui/material/Divider';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport List from '@mui/material/List';\r\nimport ListItem from '@mui/material/ListItem';\r\nimport ListItemButton from '@mui/material/ListItemButton';\r\nimport ListItemIcon from '@mui/material/ListItemIcon';\r\nimport ListItemText from '@mui/material/ListItemText';\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport CachedIcon from '@mui/icons-material/Cached';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport axios from 'axios';\r\nimport { ReactNode } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\n\r\nconst drawerWidth = 220;\r\n\r\nconst SmallerListItemIcon = withStyles({\r\n  root: {\r\n    minWidth: 0,\r\n    marginRight: 16,\r\n  },\r\n})(ListItemIcon);\r\n\r\ntype Props = {\r\n  routes: {\r\n    path: string,\r\n    label: string,\r\n    icon: ReactNode,\r\n    component: React.FC,\r\n  }[],\r\n};\r\n\r\nexport default function NavigationDrawer(props: Props) {\r\n  const { routes } = props;\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n\r\n  return (\r\n    <Drawer\r\n      variant=\"permanent\"\r\n      sx={{\r\n        width: drawerWidth,\r\n        flexShrink: 0,\r\n        [`& .MuiDrawer-paper`]: {\r\n          width: drawerWidth,\r\n          boxSizing: 'border-box',\r\n        },\r\n      }}>\r\n      <Toolbar /> {/* need this to push the nav bar below the app bar */}\r\n      <Box sx={{\r\n        height: '90vh',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        flexDirection: 'column',\r\n      }}>\r\n        <Box sx={{ overflow: 'auto' }}>\r\n          <List>\r\n            {routes.map(route => (\r\n              <ListItem\r\n                key={route.path}\r\n                disablePadding\r\n                onClick={_ => navigate(route.path)}>\r\n                <ListItemButton selected={location.pathname === route.path}>\r\n                  <SmallerListItemIcon>\r\n                    {route.icon}\r\n                  </SmallerListItemIcon>\r\n                  <ListItemText primary={route.label} />\r\n                </ListItemButton>\r\n              </ListItem>\r\n            ))}\r\n            <Divider />\r\n            <ClearCacheButtonListItem />\r\n          </List>\r\n        </Box>\r\n        <Box>\r\n          <List>\r\n            <LogoutButtonListItem />\r\n          </List>\r\n        </Box>\r\n      </Box>\r\n    </Drawer >\r\n  );\r\n}\r\n\r\nfunction ClearCacheButtonListItem() {\r\n  const onClearCacheClick = async () => {\r\n    const { status } = await axios.delete('/clear_cache');\r\n    if (status === 200) {\r\n      window.location.reload();\r\n    }\r\n  };\r\n  return (\r\n    <ListItem key=\"clearCache\" disablePadding>\r\n      <ListItemButton onClick={onClearCacheClick}>\r\n        <SmallerListItemIcon>\r\n          <CachedIcon />\r\n        </SmallerListItemIcon>\r\n        <ListItemText primary=\"Clear Cache\" />\r\n      </ListItemButton>\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nfunction LogoutButtonListItem() {\r\n  const onLogoutClick = async () => {\r\n    const { status } = await axios.delete('/logout');\r\n    if (status === 200) {\r\n      window.location.reload();\r\n    }\r\n  };\r\n  return (\r\n    <ListItem key=\"logout\" disablePadding>\r\n      <ListItemButton onClick={onLogoutClick}>\r\n        <SmallerListItemIcon>\r\n          <LogoutIcon />\r\n        </SmallerListItemIcon>\r\n        <ListItemText primary=\"Logout\" />\r\n      </ListItemButton>\r\n    </ListItem>\r\n  );\r\n}","import Box from '@mui/material/Box';\r\n\r\nexport default function CenteredImg(\r\n  props: React.DetailedHTMLProps<\r\n    React.ImgHTMLAttributes<HTMLImageElement>,\r\n    HTMLImageElement\r\n  >,\r\n) {\r\n  return (\r\n    <Box\r\n      display=\"flex\"\r\n      alignItems=\"center\"\r\n      justifyContent=\"center\">\r\n      {/* eslint-disable-next-line jsx-a11y/alt-text */}\r\n      <img {...props} />\r\n    </Box>\r\n  );\r\n}","import CenteredImg from 'components/util/CenteredImg';\r\n\r\nconst BLUEPRINT_CAT = 9;\r\n\r\nexport default function EveIcon(props: {\r\n  typeId: number,\r\n  categoryId: number,\r\n  size: number,\r\n}) {\r\n  const imgSrc = props.categoryId === BLUEPRINT_CAT\r\n    ? `https://images.evetech.net/types/${props.typeId}/bp`\r\n    : `https://images.evetech.net/types/${props.typeId}/icon`;\r\n  return (\r\n    <CenteredImg\r\n      src={imgSrc}\r\n      width={props.size}\r\n      height={props.size}\r\n      alt=\"Icon\" />\r\n  );\r\n}","import Grid from '@mui/material/Grid';\r\nimport EveIcon from 'components/util/EveIcon';\r\n\r\nexport default function EveIconAndName(props: {\r\n  typeId: number,\r\n  categoryId: number,\r\n  name: string,\r\n}) {\r\n  return (\r\n    <Grid container alignItems=\"center\" columnSpacing={1}>\r\n      <Grid item xs={1}>\r\n        <EveIcon\r\n          typeId={props.typeId}\r\n          categoryId={props.categoryId}\r\n          size={24} />\r\n      </Grid>\r\n      <Grid item xs={11}>\r\n        {props.name}\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}","import { DataGrid, GridColDef } from '@mui/x-data-grid';\r\nimport Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport TextField from '@mui/material/TextField';\r\nimport { useState } from 'react';\r\nimport useAxios from 'axios-hooks';\r\nimport { EveAssetsRes } from '@internal/shared';\r\nimport EveIconAndName from 'components/util/EveIconAndName';\r\n\r\nexport default function AssetsPage() {\r\n  const [{ data }] = useAxios<EveAssetsRes>('/assets');\r\n\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  const isIncluded = (s: string) =>\r\n    s.toLowerCase().includes(searchText.toLowerCase());\r\n  const filteredData = data && data.filter(d =>\r\n    (d.name && isIncluded(d.name)) || (d.location && isIncluded(d.location))\r\n  );\r\n\r\n  const columns: GridColDef[] = [\r\n    {\r\n      field: 'name',\r\n      headerName: 'Name',\r\n      width: 400,\r\n      sortable: false,\r\n      renderCell: params =>\r\n        <EveIconAndName\r\n          typeId={params.row.typeId}\r\n          categoryId={params.row.categoryId}\r\n          name={params.row.name}\r\n        />,\r\n    },\r\n    {\r\n      field: 'quantity',\r\n      headerName: 'Quantity',\r\n      width: 100,\r\n      sortable: false,\r\n    },\r\n    {\r\n      field: 'location',\r\n      headerName: 'Location',\r\n      width: 500,\r\n      sortable: false,\r\n    },\r\n    {\r\n      field: 'character_name',\r\n      headerName: 'Character',\r\n      width: 200,\r\n      sortable: false,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Box sx={{ pb: 2 }}>\r\n        <TextField\r\n          InputProps={{\r\n            sx: {\r\n              backgroundColor: 'white',\r\n            }\r\n          }}\r\n          label=\"Search...\"\r\n          variant=\"outlined\"\r\n          value={searchText}\r\n          onChange={e => setSearchText(e.target.value)}\r\n        />\r\n      </Box>\r\n      <Card>\r\n        <CardContent>\r\n          <Box\r\n            sx={{ height: 'auto', width: '100%' }}\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            {filteredData ?\r\n              <DataGrid\r\n                rows={filteredData}\r\n                columns={columns}\r\n                disableSelectionOnClick\r\n                disableColumnMenu\r\n                experimentalFeatures={{ newEditingApi: true }}\r\n              />\r\n              : <CircularProgress />\r\n            }\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    </div >\r\n  )\r\n}\r\n","import React from 'react';\r\n\r\ntype UserContextType = {\r\n  character_ids: number[],\r\n  character_names: string[],\r\n  is_logged_in: boolean,\r\n};\r\n\r\nexport const defaultUserContextValue: UserContextType = {\r\n  character_ids: [],\r\n  character_names: [],\r\n  is_logged_in: false,\r\n};\r\n\r\nexport const UserContext = React.createContext(defaultUserContextValue);\r\n\r\n","/** Formats a number. */\r\nexport function formatNumber(\r\n  number: number,\r\n  fractionDigits: number = 0,\r\n): string {\r\n  return number.toLocaleString('en-US', {\r\n    maximumFractionDigits: fractionDigits,\r\n    minimumFractionDigits: fractionDigits,\r\n  });\r\n}\r\n\r\nexport function formatNumberScale(number: number): string {\r\n  return number > 1000000\r\n    ? (number / 1000000).toFixed(1) + 'M'\r\n    : number > 1000\r\n      ? (number / 1000) + 'K'\r\n      : formatNumber(number);\r\n}\r\n\r\n/** Creates a bolded number either green or red. */\r\nexport function ColoredNumber(props: {\r\n  number: number,\r\n  color: 'red' | 'green',\r\n  fractionDigits?: number,\r\n}) {\r\n\r\n  return (\r\n    <div style={{ color: props.color, fontWeight: 'bold' }}>\r\n      {formatNumber(props.number, props.fractionDigits ?? 0)}\r\n    </div>\r\n  );\r\n}","import Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport TextField from '@mui/material/TextField';\r\nimport Typography from '@mui/material/Typography';\r\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\r\nimport useAxios from 'axios-hooks';\r\nimport { formatDistanceToNowStrict } from 'date-fns';\r\nimport { useContext, useState } from 'react';\r\nimport { EveContractsRes } from '@internal/shared';\r\nimport { UserContext } from 'contexts/UserContext';\r\nimport { formatNumberScale } from './util/numbers';\r\n\r\nconst FINISHED_STATUS = 'finished';\r\n\r\nexport default function ContractsPage() {\r\n  const [{ data }] = useAxios<EveContractsRes>('/contracts');\r\n\r\n  const userContext = useContext(UserContext);\r\n\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  const isIncluded = (s: string) =>\r\n    s.toLowerCase().includes(searchText.toLowerCase());\r\n  const filteredData = data && data.filter(d =>\r\n    (d.acceptor && isIncluded(d.acceptor.name))\r\n    || (d.assignee && isIncluded(d.assignee.name))\r\n    || (d.issuer && isIncluded(d.issuer.name))\r\n    || (d.title && isIncluded(d.title))\r\n  );\r\n\r\n  const finishedContracts = filteredData &&\r\n    filteredData.filter((c: any) => c.status === FINISHED_STATUS);\r\n  const activeContracts = filteredData &&\r\n    filteredData.filter((c: any) => c.status !== FINISHED_STATUS);\r\n\r\n  const emphasizeSelf = (characterId: number | null, text: string) =>\r\n    userContext.is_logged_in\r\n      && characterId\r\n      && userContext.character_ids.includes(characterId)\r\n      ?\r\n      <div style={{ color: 'orange' }}>\r\n        {text}\r\n      </div>\r\n      : text;\r\n\r\n  const columns = (dateField: GridColDef): GridColDef[] => ([\r\n    {\r\n      field: 'issuer',\r\n      headerName: 'Issuer',\r\n      width: 150,\r\n      sortable: false,\r\n      valueGetter: params => params?.value?.name,\r\n      renderCell: params => emphasizeSelf(params.row.issuer?.id, params.value),\r\n    },\r\n    {\r\n      field: 'assignee',\r\n      headerName: 'Assignee',\r\n      width: 150,\r\n      sortable: false,\r\n      valueGetter: params => params?.value?.name,\r\n      renderCell: params => emphasizeSelf(params.row.assignee?.id, params.value),\r\n    },\r\n    {\r\n      field: 'acceptor',\r\n      headerName: 'Acceptor',\r\n      width: 150,\r\n      sortable: false,\r\n      valueGetter: params => params?.value?.name,\r\n      renderCell: params => emphasizeSelf(params.row.acceptor?.id, params.value),\r\n    },\r\n    {\r\n      field: 'title',\r\n      headerName: 'Title',\r\n      width: 300,\r\n      sortable: false,\r\n    },\r\n    {\r\n      field: 'price',\r\n      headerName: 'Price',\r\n      width: 100,\r\n      valueFormatter: params => formatNumberScale(params.value),\r\n    },\r\n    dateField,  // Inject date field here\r\n    {\r\n      field: 'type',\r\n      headerName: 'Type',\r\n      width: 130,\r\n      sortable: false,\r\n    },\r\n  ]);\r\n\r\n  const columnsActive = columns(\r\n    {\r\n      field: 'date_expired',\r\n      headerName: 'Expires',\r\n      width: 120,\r\n      sortable: false,\r\n      valueFormatter: params => formatDistanceToNowStrict(\r\n        new Date(params.value),\r\n        { addSuffix: true },\r\n      ),\r\n    },\r\n  );\r\n  const columnsFinished = columns(\r\n    {\r\n      field: 'date_accepted',\r\n      headerName: 'Accepted',\r\n      width: 120,\r\n      sortable: false,\r\n      valueFormatter: params => formatDistanceToNowStrict(\r\n        new Date(params.value),\r\n        { addSuffix: true },\r\n      ),\r\n    },\r\n  );\r\n  return <div>\r\n    <Box sx={{ pb: 2 }}>\r\n      <TextField\r\n        InputProps={{\r\n          sx: {\r\n            backgroundColor: 'white',\r\n          }\r\n        }}\r\n        label=\"Search...\"\r\n        variant=\"outlined\"\r\n        value={searchText}\r\n        onChange={e => setSearchText(e.target.value)}\r\n      />\r\n    </Box>\r\n    <Box sx={{ pb: 1, pt: 2 }}>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Active Contracts\r\n      </Typography>\r\n    </Box>\r\n    <Card>\r\n      <CardContent>\r\n        <Box\r\n          sx={{ height: 'auto', width: '100%' }}\r\n          display=\"flex\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n        >\r\n          {activeContracts ?\r\n            <DataGrid\r\n              initialState={{\r\n                sorting: {\r\n                  sortModel: [{ field: 'date_expired', sort: 'asc' }],\r\n                },\r\n              }}\r\n              hideFooter={true}\r\n              rows={activeContracts}\r\n              columns={columnsActive}\r\n              disableSelectionOnClick\r\n              disableColumnMenu\r\n              experimentalFeatures={{ newEditingApi: true }}\r\n            />\r\n            : <CircularProgress />\r\n          }\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n    <Box sx={{ pb: 1, pt: 4 }}>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Finished Contracts\r\n      </Typography>\r\n    </Box>\r\n    <Card>\r\n      <CardContent>\r\n        <Box\r\n          sx={{ height: 'auto', width: '100%' }}\r\n          display=\"flex\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n        >\r\n          {finishedContracts ?\r\n            <DataGrid\r\n              initialState={{\r\n                sorting: {\r\n                  sortModel: [{ field: 'date_accepted', sort: 'desc' }],\r\n                },\r\n              }}\r\n              rows={finishedContracts}\r\n              columns={columnsFinished}\r\n              disableSelectionOnClick\r\n              disableColumnMenu\r\n              experimentalFeatures={{ newEditingApi: true }}\r\n            />\r\n            : <CircularProgress />\r\n          }\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  </div>;\r\n}","import useAxios from 'axios-hooks';\r\nimport Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\r\nimport { formatDistanceToNowStrict } from 'date-fns';\r\nimport { EveIndustryJobHistoryRes, EveIndustryJobsRes } from '@internal/shared';\r\nimport EveIconAndName from 'components/util/EveIconAndName';\r\nimport { Tab, Tabs } from '@mui/material';\r\nimport { useState } from 'react';\r\n\r\nconst activityColors: { [key: string]: string } = {\r\n  'Manufacturing': 'orange',\r\n  'TE Research': 'blue',\r\n  'ME Research': 'blue',\r\n  'Invention': 'green',\r\n  'Reactions': 'orange',\r\n  'Copying': 'red',\r\n};\r\n\r\nenum SelectedTab {\r\n  ACTIVE = 'ACTIVE',\r\n  HISTORY = 'HISTORY',\r\n};\r\n\r\nconst activeJobsColumns: GridColDef[] = [\r\n  {\r\n    field: 'activity',\r\n    headerName: 'Activity',\r\n    width: 130,\r\n    renderCell: params =>\r\n      <div style={{ color: activityColors[params.value] }}>\r\n        {params.value}\r\n      </div>,\r\n  },\r\n  {\r\n    field: 'end_date',\r\n    headerName: 'Remaining Time',\r\n    width: 170,\r\n    valueFormatter: params => formatDistanceToNowStrict(\r\n      new Date(params.value),\r\n      { addSuffix: true },\r\n    ),\r\n  },\r\n  {\r\n    field: 'product',\r\n    headerName: 'Product',\r\n    width: 320,\r\n    sortable: false,\r\n    renderCell: params =>\r\n      <EveIconAndName\r\n        typeId={params.row.product_type_id}\r\n        categoryId={params.row.category_id}\r\n        name={params.row.product_name}\r\n      />,\r\n  },\r\n  {\r\n    field: 'progress',\r\n    headerName: 'Progress',\r\n    width: 100,\r\n    sortable: false,\r\n    renderCell: params =>\r\n      <div style={{ color: params.value === 1 ? 'green' : 'default' }}>\r\n        {Math.round(params.value * 100) + '%'}\r\n      </div>,\r\n  },\r\n  {\r\n    field: 'runs',\r\n    headerName: 'Runs',\r\n    width: 70,\r\n    sortable: false,\r\n  },\r\n  {\r\n    field: 'location',\r\n    headerName: 'Location',\r\n    width: 200,\r\n    sortable: false,\r\n  },\r\n  {\r\n    field: 'character_name',\r\n    headerName: 'Character',\r\n    width: 200,\r\n    sortable: false,\r\n  },\r\n];\r\n\r\nconst jobHistoryColumns: GridColDef[] = [\r\n  {\r\n    field: 'product',\r\n    headerName: 'Product',\r\n    width: 320,\r\n    sortable: false,\r\n    renderCell: params =>\r\n      <EveIconAndName\r\n        typeId={params.row.product_type_id}\r\n        categoryId={params.row.category_id}\r\n        name={params.row.product_name}\r\n      />,\r\n  },\r\n  {\r\n    field: 'category_name',\r\n    headerName: 'Category',\r\n    width: 150,\r\n    sortable: true,\r\n  },\r\n  {\r\n    field: 'meta',\r\n    headerName: 'Tech Level',\r\n    width: 100,\r\n    sortable: true,\r\n  },\r\n  {\r\n    field: 'count',\r\n    headerName: 'Count',\r\n    width: 100,\r\n    sortable: true,\r\n  },\r\n];\r\n\r\nexport default function IndustryJobsPage() {\r\n  const [selectedTab, setSelectedTab] = useState(SelectedTab.ACTIVE);\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <Tabs\r\n          sx={{\r\n            mb: 2,\r\n            borderBottom: 1,\r\n            borderColor: 'divider',\r\n          }}\r\n          value={selectedTab}\r\n          onChange={(_, newValue) => setSelectedTab(newValue)}\r\n        >\r\n          <Tab label=\"Active\" value={SelectedTab.ACTIVE} />\r\n          <Tab label=\"History\" value={SelectedTab.HISTORY} />\r\n        </Tabs>\r\n        <Box\r\n          sx={{ height: 'auto', width: '100%' }}\r\n          display=\"flex\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n        >\r\n          {selectedTab === SelectedTab.ACTIVE &&\r\n            <ActiveJobs />\r\n          }\r\n          {selectedTab === SelectedTab.HISTORY &&\r\n            <JobHistory />\r\n          }\r\n        </Box>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nfunction ActiveJobs() {\r\n  const [{ data }] = useAxios<EveIndustryJobsRes>('/industry_jobs');\r\n  const activeJobs = data?.filter(job => job.status === 'active');\r\n  return activeJobs ?\r\n    <DataGrid\r\n      initialState={{\r\n        sorting: {\r\n          sortModel: [{ field: 'end_date', sort: 'asc' }],\r\n        },\r\n      }}\r\n      rows={activeJobs}\r\n      columns={activeJobsColumns}\r\n      disableSelectionOnClick\r\n      disableColumnMenu\r\n      experimentalFeatures={{ newEditingApi: true }}\r\n    />\r\n    : <CircularProgress />\r\n}\r\n\r\nfunction JobHistory() {\r\n  const [{ data }] = useAxios<EveIndustryJobHistoryRes>('/industry_job_history');\r\n  return data ?\r\n    <DataGrid\r\n      initialState={{\r\n        sorting: {\r\n          sortModel: [{ field: 'end_date', sort: 'asc' }],\r\n        },\r\n      }}\r\n      rows={data}\r\n      columns={jobHistoryColumns}\r\n      disableSelectionOnClick\r\n      disableColumnMenu\r\n      experimentalFeatures={{ newEditingApi: true }}\r\n    />\r\n    : <CircularProgress />\r\n}","import Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport Snackbar from '@mui/material/Snackbar';\r\nimport Tab from '@mui/material/Tab';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport Typography from '@mui/material/Typography';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport { groupBy, uniqueId } from 'underscore';\r\nimport { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { ProductionPlanRes } from '@internal/shared';\r\nimport EveIconAndName from 'components/util/EveIconAndName';\r\nimport useProductionPlanState from './useProductionPlanState';\r\n\r\nenum SelectedTab {\r\n  RUNS = 'RUNS',\r\n  MATERIALS = 'MATERIALS',\r\n};\r\n\r\nexport default function DashboardProductionPlanCard() {\r\n  const { productionPlan, fetchProductionPlan } = useProductionPlanState();\r\n\r\n  useEffect(\r\n    () => {\r\n      fetchProductionPlan();\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [],\r\n  );\r\n\r\n  const [selectedTab, setSelectedTab] = useState(SelectedTab.RUNS);\r\n\r\n  const [refreshingAssets, setRefreshingAssets] = useState(false);\r\n  const onRefreshAssetsClick = async () => {\r\n    setRefreshingAssets(true);\r\n    const { status } = await axios.delete('/clear_assets_cache');\r\n    if (status === 200) {\r\n      await fetchProductionPlan();\r\n    }\r\n    setRefreshingAssets(false);\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <Box sx={{\r\n          borderBottom: 1,\r\n          borderColor: 'divider',\r\n          mb: 1,\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n        }}>\r\n          <Tabs\r\n            value={selectedTab}\r\n            onChange={(_, newValue) => setSelectedTab(newValue)}\r\n          >\r\n            <Tab label=\"Runs\" value={SelectedTab.RUNS} />\r\n            <Tab label=\"Materials\" value={SelectedTab.MATERIALS} />\r\n          </Tabs>\r\n          <LoadingButton\r\n            sx={{ height: '40px' }}\r\n            loading={refreshingAssets}\r\n            variant=\"contained\"\r\n            size=\"small\"\r\n            onClick={onRefreshAssetsClick}>\r\n            Refresh Assets\r\n          </LoadingButton>\r\n        </Box>\r\n        {selectedTab === SelectedTab.MATERIALS\r\n          ? <MaterialsTab\r\n            data={productionPlan.value}\r\n            loading={productionPlan.loading}\r\n          />\r\n          : <BlueprintRunsTab\r\n            data={productionPlan.value}\r\n            loading={productionPlan.loading}\r\n          />\r\n        }\r\n      </CardContent>\r\n    </Card >\r\n  );\r\n}\r\n\r\nfunction MaterialsTab(props: {\r\n  data: ProductionPlanRes,\r\n  loading: boolean,\r\n}) {\r\n  const [snackbarOpen, setSnackbarOpen] = useState(false);\r\n\r\n  const columns: GridColDef[] = [\r\n    {\r\n      field: 'name',\r\n      headerName: 'Material',\r\n      width: 300,\r\n      sortable: false,\r\n      renderCell: params =>\r\n        <EveIconAndName\r\n          typeId={params.row.typeId}\r\n          categoryId={params.row.categoryId}\r\n          name={params.row.name}\r\n        />,\r\n    },\r\n    {\r\n      field: 'quantity',\r\n      headerName: 'Quantity',\r\n      width: 100,\r\n      sortable: false,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', pb: 1 }}>\r\n        <Typography\r\n          style={{ display: 'inline-block' }}\r\n          variant=\"h6\"\r\n          gutterBottom\r\n        >\r\n          Missing Materials\r\n        </Typography>\r\n        <LoadingButton\r\n          loading={props.loading}\r\n          variant=\"contained\"\r\n          size=\"small\"\r\n          onClick={() => {\r\n            navigator.clipboard.writeText(\r\n              props.data!.materials\r\n                .map(m => m.name + ' ' + m.quantity)\r\n                .join('\\r\\n')\r\n            );\r\n            setSnackbarOpen(true);\r\n          }}>\r\n          Copy\r\n        </LoadingButton>\r\n        <Snackbar\r\n          open={snackbarOpen}\r\n          autoHideDuration={3000}\r\n          message=\"Copied!\"\r\n          onClose={() => setSnackbarOpen(false)}\r\n          action={\r\n            <IconButton\r\n              size=\"small\"\r\n              aria-label=\"close\"\r\n              color=\"inherit\"\r\n              onClick={() => setSnackbarOpen(false)}\r\n            >\r\n              <CloseIcon fontSize=\"small\" />\r\n            </IconButton>\r\n          }\r\n        />\r\n      </Box>\r\n      {!props.loading\r\n        ?\r\n        <DataGrid\r\n          rows={props.data.materials}\r\n          columns={columns}\r\n          disableSelectionOnClick\r\n          disableColumnMenu\r\n          experimentalFeatures={{ newEditingApi: true }}\r\n        />\r\n        :\r\n        <Box\r\n          sx={{ height: 'auto', width: '100%' }}\r\n          display=\"flex\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\">\r\n          <CircularProgress />\r\n        </Box>\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\nfunction BlueprintRunsTab(props: {\r\n  data: ProductionPlanRes,\r\n  loading: boolean,\r\n}) {\r\n  const groupedData = groupBy(props.data.blueprintRuns, 'productionCategory');\r\n\r\n  const columns: (headerName: string) => GridColDef[] = headerName => [\r\n    {\r\n      field: 'name',\r\n      headerName,\r\n      width: 300,\r\n      sortable: false,\r\n      renderCell: params =>\r\n        <Box sx={{\r\n          color: params.row.blueprintExists ? 'default' : 'red',\r\n          display: 'contents',\r\n        }}>\r\n          <EveIconAndName\r\n            typeId={params.row.typeId}\r\n            categoryId={params.row.categoryId}\r\n            name={params.row.name}\r\n          />\r\n        </Box>,\r\n    },\r\n    {\r\n      field: 'runs',\r\n      headerName: 'Runs',\r\n      width: 100,\r\n      sortable: false,\r\n      renderCell: params => params.row.activeRuns\r\n        ? <div style={{ color: 'green', fontWeight: 'bold' }}>\r\n          {params.row.activeRuns + ' / ' + params.row.runs}\r\n        </div>\r\n        : params.row.runs,\r\n    },\r\n    {\r\n      field: 'daysToRun',\r\n      headerName: 'Days',\r\n      width: 70,\r\n      align: 'right',\r\n      sortable: false,\r\n      valueFormatter: params => params.value.toFixed(1),\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <Box>\r\n        <Typography\r\n          style={{ display: 'inline-block' }}\r\n          variant=\"h6\"\r\n          gutterBottom\r\n        >\r\n          Blueprint Runs\r\n        </Typography>\r\n      </Box>\r\n      {!props.loading\r\n        ?\r\n        Object.entries(groupedData).map(d =>\r\n          <DataGrid\r\n            key={uniqueId()}\r\n            rows={d[1]}\r\n            columns={columns(d[0])}\r\n            disableSelectionOnClick\r\n            disableColumnMenu\r\n            hideFooter\r\n            experimentalFeatures={{ newEditingApi: true }}\r\n          />\r\n        )\r\n        :\r\n        <Box\r\n          sx={{ height: 'auto', width: '100%' }}\r\n          display=\"flex\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\">\r\n          <CircularProgress />\r\n        </Box>\r\n      }\r\n    </>\r\n  );\r\n}","import { ProductionPlanRes } from '@internal/shared';\r\nimport { atom } from 'recoil';\r\n\r\nexport interface ProductionPlanState {\r\n  value: ProductionPlanRes,\r\n  loading: boolean,\r\n};\r\n\r\nconst initialState: ProductionPlanState = {\r\n  value: {\r\n    blueprintRuns: [],\r\n    materials: [],\r\n  },\r\n  loading: true,\r\n};\r\n\r\nexport const productionPlanAtom = atom({\r\n  key: 'productionPlan',\r\n  default: initialState,\r\n});","import { ProductionPlanState, productionPlanAtom } from 'recoil/atoms';\r\nimport { useRecoilState } from 'recoil';\r\nimport axios from 'axios';\r\nimport { ProductionPlanRes } from '@internal/shared';\r\n\r\ntype UseProductionPlanState = {\r\n  productionPlan: ProductionPlanState,\r\n  fetchProductionPlan: (group?: string) => Promise<void>\r\n};\r\n\r\nexport default function useProductionPlanState(\r\n): UseProductionPlanState {\r\n  const [productionPlan, setProductionPlan] = useRecoilState(productionPlanAtom);\r\n\r\n  const fetchProductionPlan = async (group?: string) => {\r\n    const { data } = await axios.get<ProductionPlanRes>(\r\n      group ? `/production_plan/${group}` : '/production_plan',\r\n    );\r\n    setProductionPlan({ value: data, loading: false });\r\n  };\r\n\r\n  return { productionPlan, fetchProductionPlan };\r\n}\r\n","// Helper function for strictly typed filter\r\nfunction notEmpty(value) {\r\n  return !(value === null || value === undefined)\r\n}\r\n\r\n// Strictly typed null filter\r\nexport function filterNullOrUndef(arr) {\r\n  return arr.filter(notEmpty)\r\n}\r\n","import { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport Box from '@mui/material/Box';\r\nimport Grid from '@mui/material/Grid';\r\nimport TextField from '@mui/material/TextField';\r\nimport Typography from '@mui/material/Typography';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport LoadingButton from '@mui/lab/LoadingButton';\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { first } from 'underscore';\r\nimport {\r\n  filterNullOrUndef,\r\n  PlannedProductsRes,\r\n  PlannedProductsWithErrorRes,\r\n} from '@internal/shared';\r\nimport useProductionPlanState from '../useProductionPlanState';\r\n\r\nexport default function DashboardProductsTextArea(props: {\r\n  group: string,\r\n  plannedProducts: PlannedProductsRes,\r\n  onUpdate: () => void,\r\n}) {\r\n  const [text, setText] = useState('');\r\n  useEffect(\r\n    () => setText(\r\n      props.plannedProducts.map(pp => pp.name + ' ' + pp.quantity).join('\\n'),\r\n    ),\r\n    [props.plannedProducts],\r\n  );\r\n\r\n  const { fetchProductionPlan } = useProductionPlanState();\r\n\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [errors, setErrors] = useState<string[]>([]);\r\n  const onButtonClick = async () => {\r\n    if (props.group === '') {\r\n      toast.error('Group name cannot be empty!', {\r\n        position: 'bottom-center',\r\n        autoClose: 3000,\r\n      });\r\n      return;\r\n    }\r\n    setIsSubmitting(true);\r\n    const { data } = await axios.post<PlannedProductsWithErrorRes>(\r\n      '/planned_products_recreate',\r\n      { text, group: props.group },\r\n    );\r\n\r\n    const errors = filterNullOrUndef(data.map(pp => pp.error));\r\n    if (errors.length === 0) {\r\n      // Update only when no errors\r\n      props.onUpdate();\r\n\r\n      // Trigger new production plan\r\n      await fetchProductionPlan();\r\n    }\r\n    setErrors(errors);\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  const RedTextTypography = withStyles({\r\n    root: {\r\n      color: 'red',\r\n    },\r\n  })(Typography);\r\n\r\n  return (\r\n    <Box>\r\n      <TextField\r\n        sx={{ pb: 2 }}\r\n        fullWidth\r\n        multiline\r\n        placeholder={\r\n          'Each line is a separate product.\\n'\r\n          + 'Format: \"product_name quantity\" without quotes\\n'\r\n          + 'E.g.\\n'\r\n          + 'Nanofiber Internal Structure II 10\\n'\r\n          + '1MN Afterburner II 5\\n'\r\n          + 'Kikimora 1'\r\n        }\r\n        rows={15}\r\n        value={text}\r\n        onChange={e => setText(e.target.value)}\r\n      />\r\n      <Grid container spacing={2}>\r\n        <Grid item xs={3}>\r\n          <LoadingButton\r\n            loading={isSubmitting}\r\n            variant=\"contained\"\r\n            onClick={onButtonClick}\r\n          >\r\n            Submit\r\n          </LoadingButton>\r\n        </Grid>\r\n        <Grid item xs={9} sx={{ display: 'flex' }}>\r\n          <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n            <RedTextTypography variant='body2'>\r\n              {first(errors)}\r\n            </RedTextTypography>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n      <ToastContainer />\r\n    </Box>\r\n  );\r\n}","import { EveSdeTypesRes } from '@internal/shared';\r\nimport useAxios from 'axios-hooks';\r\nimport Typography from '@mui/material/Typography';\r\nimport Autocomplete, { createFilterOptions } from '@mui/material/Autocomplete';\r\nimport TextField from '@mui/material/TextField';\r\n\r\nexport default function ItemAutocomplete(props: {\r\n  onInputChange: (value: string) => void,\r\n  width?: number,\r\n}) {\r\n  const [{ data, loading }] = useAxios<EveSdeTypesRes>('/type_ids_items');\r\n  const autocompleteData = data && data.map(t => ({\r\n    label: t.name,\r\n    id: t.id,\r\n  }));\r\n\r\n  return (\r\n    <Autocomplete\r\n      sx={{ width: props.width ?? 280 }}\r\n      disablePortal\r\n      loading={loading}\r\n      options={autocompleteData ?? []}\r\n      filterOptions={createFilterOptions({ matchFrom: 'any', limit: 10 })}\r\n      isOptionEqualToValue={(option: any, value: any) =>\r\n        option.id === value.id\r\n      }\r\n      renderOption={(props, option: any) =>\r\n        <li\r\n          {...props}\r\n          style={{\r\n            paddingLeft: '8px',\r\n            paddingTop: '2px',\r\n            paddingBottom: '2px',\r\n          }}\r\n        >\r\n          <Typography variant=\"subtitle2\" gutterBottom>\r\n            {option.label}\r\n          </Typography>\r\n        </li>\r\n      }\r\n      renderInput={(params) =>\r\n        <TextField\r\n          {...params}\r\n          sx={{ verticalAlign: 'inherit' }}\r\n          label=\"Item\"\r\n          variant=\"standard\" />\r\n      }\r\n      onInputChange={(_, value) => props.onInputChange(value)}\r\n    />\r\n  );\r\n}","import Box from '@mui/material/Box';\r\nimport Button from '@mui/material/Button';\r\nimport IconButton from '@mui/material/IconButton';\r\nimport TextField from '@mui/material/TextField';\r\nimport DeleteIcon from '@mui/icons-material/Delete';\r\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\r\nimport axios from 'axios';\r\nimport { useState } from 'react';\r\nimport { PlannedProductsRes } from '@internal/shared';\r\nimport EveIconAndName from 'components/util/EveIconAndName';\r\nimport ItemAutocomplete from 'components/util/ItemAutocomplete';\r\n\r\nexport default function DashboardProductsDataGrid(props: {\r\n  group: string,\r\n  plannedProducts: PlannedProductsRes,\r\n  onItemDelete: () => void,\r\n  onItemAdd: () => void,\r\n}) {\r\n  const [itemTypeName, setItemTypeName] = useState('');\r\n  const [itemQuantity, setItemQuantity] = useState('');\r\n\r\n  const onDeleteItemClick = async (typeId: number) => {\r\n    const { status } = await axios.delete(\r\n      `/planned_product_delete/${props.group}/${typeId}`,\r\n    );\r\n    if (status === 200) {\r\n      props.onItemDelete();\r\n    }\r\n  };\r\n\r\n  const onAddItemClick = async (typeName: string, quantity: number) => {\r\n    const { status } = await axios.post(\r\n      '/planned_product_add',\r\n      { typeName, quantity, group: props.group },\r\n    );\r\n    if (status === 200) {\r\n      props.onItemAdd();\r\n    }\r\n  };\r\n\r\n  const columns: GridColDef[] = [\r\n    {\r\n      field: 'name',\r\n      headerName: 'Product',\r\n      width: 300,\r\n      sortable: false,\r\n      renderCell: params =>\r\n        <EveIconAndName\r\n          typeId={params.row.typeId}\r\n          categoryId={params.row.categoryId}\r\n          name={params.row.name}\r\n        />,\r\n    },\r\n    {\r\n      field: 'quantity',\r\n      headerName: 'Quantity',\r\n      width: 120,\r\n      sortable: false,\r\n      renderCell: params =>\r\n        <div style={{\r\n          color: params.row.stock >= params.row.quantity ? 'green' : 'default',\r\n          fontWeight: params.row.stock >= params.row.quantity\r\n            ? 'bold'\r\n            : 'default',\r\n        }}>\r\n          {Math.min(params.row.stock, params.row.quantity)\r\n            + (params.row.active > 0 ? ' (+' + params.row.active + ')' : '')\r\n            + ' / '\r\n            + params.row.quantity}\r\n        </div>\r\n    },\r\n    {\r\n      field: 'delete',\r\n      headerName: 'Delete',\r\n      width: 80,\r\n      sortable: false,\r\n      renderCell: params =>\r\n        <IconButton\r\n          color=\"error\"\r\n          onClick={() => onDeleteItemClick(params.row.typeId)}>\r\n          <DeleteIcon />\r\n        </IconButton>,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ pb: 1 }}>\r\n        <DataGrid\r\n          hideFooter\r\n          rows={props.plannedProducts}\r\n          columns={columns}\r\n          disableSelectionOnClick\r\n          disableColumnMenu\r\n        />\r\n      </Box>\r\n      <Box sx={{ pr: 2, display: 'inline-flex' }}>\r\n        <ItemAutocomplete onInputChange={value => setItemTypeName(value)} />\r\n      </Box>\r\n      <Box sx={{ display: 'inline-flex', pr: 2 }}>\r\n        <TextField\r\n          sx={{ width: 100 }}\r\n          label=\"Quantity\"\r\n          variant=\"standard\"\r\n          onChange={event => setItemQuantity(event.target.value)} />\r\n      </Box>\r\n      <Box sx={{ display: 'inline-flex' }}>\r\n        <Button\r\n          variant=\"contained\"\r\n          size=\"small\"\r\n          onClick={() => onAddItemClick(itemTypeName, Number(itemQuantity))}>\r\n          Add\r\n        </Button>\r\n      </Box>\r\n    </>\r\n  );\r\n}\r\n","import Box from '@mui/material/Box';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Switch from '@mui/material/Switch';\r\nimport LoadingButton from '@mui/lab/LoadingButton';\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { PlannedProductsRes } from '@internal/shared';\r\nimport DashboardProductsTextArea from './DashboardProductsTextArea';\r\nimport DashboardProductsDataGrid from './DashboardProductsDataGrid';\r\nimport useProductionPlanState from '../useProductionPlanState';\r\n\r\nexport default function DashboardProducts(props: {\r\n  group: string,\r\n  plannedProducts: PlannedProductsRes,\r\n  onGroupDelete: () => void,\r\n}) {\r\n  const [plannedProducts, setPlannedProducts] =\r\n    useState<PlannedProductsRes>([]);\r\n  useEffect(\r\n    () => setPlannedProducts(props.plannedProducts),\r\n    [props.plannedProducts],\r\n  );\r\n\r\n  const [useGrid, setUseGrid] = useState(true);\r\n  const [isIsolated, setIsIsolated] = useState(false);\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n\r\n  const onDeleteGroupClick = async () => {\r\n    setIsDeleting(true);\r\n    const { status } = await axios.delete(\r\n      `/planned_product_group_delete/${props.group}`,\r\n    );\r\n    setIsDeleting(false);\r\n    if (status === 200) {\r\n      props.onGroupDelete();\r\n    }\r\n  };\r\n\r\n  const { fetchProductionPlan } = useProductionPlanState();\r\n\r\n  const onProductChange = async () => {\r\n    const { data } = await axios.get<PlannedProductsRes>(\r\n      `/planned_products_group/${props.group}`,\r\n    );\r\n    setPlannedProducts(data);\r\n    await fetchProductionPlan();\r\n  };\r\n\r\n  useEffect(\r\n    () => {\r\n      isIsolated\r\n        ? fetchProductionPlan(props.group)\r\n        : fetchProductionPlan();\r\n    },\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n    [isIsolated, props.group],\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', pb: 2 }}>\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={useGrid}\r\n              onChange={e => setUseGrid(e.target.checked)}\r\n            />\r\n          }\r\n          label=\"Use Grid\"\r\n          labelPlacement=\"start\"\r\n        />\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={isIsolated}\r\n              onChange={e => {\r\n                setIsIsolated(e.target.checked);\r\n              }}\r\n            />\r\n          }\r\n          label=\"Isolate\"\r\n          labelPlacement=\"start\"\r\n        />\r\n        <LoadingButton\r\n          loading={isDeleting}\r\n          variant=\"contained\"\r\n          color=\"error\"\r\n          onClick={onDeleteGroupClick}\r\n        >\r\n          Delete\r\n        </LoadingButton>\r\n      </Box>\r\n      {useGrid\r\n        ?\r\n        <DashboardProductsDataGrid\r\n          group={props.group}\r\n          plannedProducts={plannedProducts}\r\n          onItemDelete={onProductChange}\r\n          onItemAdd={onProductChange} />\r\n        :\r\n        <DashboardProductsTextArea\r\n          group={props.group}\r\n          plannedProducts={plannedProducts}\r\n          onUpdate={() => {\r\n            onProductChange();\r\n            setUseGrid(true);\r\n          }} />\r\n      }\r\n    </>\r\n  );\r\n}","import Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport Tab from '@mui/material/Tab';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport TextField from '@mui/material/TextField';\r\nimport Typography from '@mui/material/Typography';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport useDeepCompareEffect from 'use-deep-compare-effect'\r\nimport { first, groupBy } from 'underscore';\r\nimport useAxios from 'axios-hooks';\r\nimport { useState } from 'react';\r\nimport { PlannedProductsRes } from '@internal/shared';\r\nimport DashboardProductsTextArea from './products_card/DashboardProductsTextArea';\r\nimport DashboardProducts from './products_card/DashboardProducts';\r\nimport useProductionPlanState from './useProductionPlanState';\r\n\r\nconst ADD_TAB = 'add_tab';\r\n\r\nexport default function DashboardProductsCard() {\r\n  const [{ data, loading }, refetch] =\r\n    useAxios<PlannedProductsRes>('/planned_products');\r\n\r\n  const groupedPlannedProducts = groupBy(data ?? [], pp => pp.group);\r\n  const productGroups = Object.keys(groupedPlannedProducts);\r\n\r\n  const [selectedTab, setSelectedTab] = useState(ADD_TAB);\r\n  useDeepCompareEffect(\r\n    () => setSelectedTab(first(productGroups) || ADD_TAB),\r\n    [productGroups],\r\n  );\r\n\r\n  const { fetchProductionPlan } = useProductionPlanState();\r\n\r\n  const onChange = () => {\r\n    refetch();\r\n    fetchProductionPlan();\r\n  };\r\n\r\n  return (\r\n    <Card sx={{ height: 'auto' }}>\r\n      <CardContent>\r\n        <Typography\r\n          style={{ display: 'inline-block' }}\r\n          variant=\"h6\"\r\n          gutterBottom\r\n        >\r\n          Products\r\n        </Typography>\r\n        {loading\r\n          ?\r\n          <Box\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\">\r\n            <CircularProgress />\r\n          </Box>\r\n          :\r\n          <>\r\n            <Box sx={{\r\n              borderBottom: 1,\r\n              borderColor: 'divider',\r\n              pt: 1,\r\n              mb: 2,\r\n              display: 'flex',\r\n            }}>\r\n              <Tabs\r\n                orientation=\"horizontal\"\r\n                value={selectedTab}\r\n                onChange={(_, newValue) => setSelectedTab(newValue)}\r\n                variant=\"scrollable\"\r\n                scrollButtons=\"auto\">\r\n                {productGroups.map(group =>\r\n                  <Tab\r\n                    sx={{ p: 0, minHeight: '36px', alignItems: 'center' }}\r\n                    label={group}\r\n                    value={group}\r\n                    key={group} />\r\n                )}\r\n                <Tab\r\n                  sx={{ p: 0, minHeight: '36px' }}\r\n                  icon={<AddIcon />}\r\n                  value={ADD_TAB} />\r\n              </Tabs>\r\n            </Box>\r\n            {selectedTab !== ADD_TAB\r\n              ?\r\n              <DashboardProducts\r\n                group={selectedTab}\r\n                plannedProducts={groupedPlannedProducts[selectedTab]}\r\n                onGroupDelete={() => {\r\n                  onChange();\r\n                  setSelectedTab(ADD_TAB);  // Otherwise it will error\r\n                }} />\r\n              :\r\n              <NewGroupTab onUpdate={onChange} />\r\n            }\r\n          </>\r\n        }\r\n      </CardContent>\r\n    </Card >\r\n  );\r\n}\r\n\r\nfunction NewGroupTab(props: {\r\n  onUpdate: () => void,\r\n}) {\r\n  const [name, setName] = useState('');\r\n  return (\r\n    <>\r\n      <Box sx={{ pb: 2 }}>\r\n        <TextField\r\n          label=\"Group Name\"\r\n          variant=\"outlined\"\r\n          value={name}\r\n          onChange={e => setName(e.target.value)}\r\n        />\r\n      </Box>\r\n      <DashboardProductsTextArea\r\n        group={name}\r\n        plannedProducts={[]}\r\n        onUpdate={() => props.onUpdate()} />\r\n    </>\r\n  );\r\n}\r\n\r\n\r\n\r\n","import Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport FormControlLabel from '@mui/material/FormControlLabel';\r\nimport Switch from '@mui/material/Switch';\r\nimport Tab from '@mui/material/Tab';\r\nimport Tabs from '@mui/material/Tabs';\r\nimport TextField from '@mui/material/TextField';\r\nimport LoadingButton from '@mui/lab/LoadingButton';\r\nimport AddIcon from '@mui/icons-material/Add';\r\nimport useAxios from 'axios-hooks';\r\nimport { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { ScribbleRes, ScribblesRes } from '@internal/shared';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\r\n\r\nexport default function DashboardScribblesCard() {\r\n  const [{ data, loading }, refetch] = useAxios<ScribblesRes>('/scribbles');\r\n  const [scribbles, setScribbles] = useState<ScribblesRes>([]);\r\n  useEffect(\r\n    () => setScribbles(data ?? []),\r\n    [data],\r\n  );\r\n\r\n  const setScribblesFull = (newText: string, index: number) =>\r\n    setScribbles(scribbles.map((s, i) => ({\r\n      id: s.id,\r\n      name: s.name,\r\n      text: i === index ? newText : s.text,\r\n    })));\r\n\r\n  const [selectedTab, setSelectedTab] = useState(0);\r\n\r\n  if (loading) {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <CircularProgress />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  const onSaveButtonClick = async (index: number) => {\r\n    const { data } = await axios.post<ScribbleRes>(\r\n      `/edit_scribble/${scribbles[index].id}`,\r\n      { text: scribbles[index].text },\r\n    );\r\n    setScribblesFull(data.text, index);\r\n  };\r\n\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <Box sx={{\r\n          borderBottom: 1,\r\n          borderColor: 'divider',\r\n          mb: 1,\r\n          display: 'flex',\r\n        }}>\r\n          <Tabs\r\n            value={selectedTab}\r\n            onChange={(_, newValue) => setSelectedTab(newValue)}>\r\n            {scribbles.map((s, i) =>\r\n              <Tab label={s.name} value={i} key={i} />\r\n            )}\r\n            <Tab icon={<AddIcon />} value={scribbles.length} />\r\n          </Tabs>\r\n        </Box>\r\n        {selectedTab < scribbles.length &&\r\n          <Scribble\r\n            id={scribbles[selectedTab].id}\r\n            text={scribbles[selectedTab].text}\r\n            onChange={(text) => setScribblesFull(text, selectedTab)}\r\n            onSave={() => onSaveButtonClick(selectedTab)}\r\n            onDelete={() => {\r\n              refetch();\r\n              setSelectedTab(0);\r\n            }}\r\n          />\r\n        }\r\n        {selectedTab === scribbles.length &&\r\n          <AddScribble onAdded={addedScribble =>\r\n            setScribbles([...scribbles, addedScribble])}\r\n          />\r\n        }\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nfunction Scribble(props: {\r\n  id: number,\r\n  text: string,\r\n  onChange: (text: string) => void,\r\n  onSave: () => void,\r\n  onDelete: () => void,\r\n}) {\r\n  const [isEditMode, setIsEditMode] = useState(false);\r\n\r\n  const columns: GridColDef[] = [\r\n    {\r\n      field: 'data',\r\n      headerName: 'Data',\r\n      flex: 1,\r\n      sortable: false,\r\n    },\r\n  ];\r\n\r\n  const [isSaving, setIsSaving] = useState(false);\r\n  const onSaveClick = () => {\r\n    setIsSaving(true);\r\n    props.onSave();\r\n    setIsEditMode(false);\r\n    setIsSaving(false);\r\n  };\r\n\r\n  const [isDeleting, setIsDeleting] = useState(false);\r\n  const onDeleteClick = async () => {\r\n    setIsDeleting(true);\r\n    const { status } = await axios.delete(`/delete_scribble/${props.id}`);\r\n    if (status === 200) {\r\n      props.onDelete();\r\n    }\r\n    setIsDeleting(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', pb: 2 }}>\r\n        <FormControlLabel\r\n          control={\r\n            <Switch\r\n              checked={isEditMode}\r\n              onChange={e => setIsEditMode(e.target.checked)}\r\n            />\r\n          }\r\n          label=\"Edit\"\r\n          labelPlacement=\"start\"\r\n        />\r\n        <LoadingButton\r\n          loading={isDeleting}\r\n          variant=\"contained\"\r\n          color=\"error\"\r\n          onClick={onDeleteClick}\r\n        >\r\n          Delete\r\n        </LoadingButton>\r\n      </Box>\r\n      <Box sx={{ pb: 2 }}>\r\n        {isEditMode\r\n          ?\r\n          <TextField\r\n            fullWidth\r\n            multiline\r\n            rows={15}\r\n            placeholder=\"Scribble something\"\r\n            value={props.text}\r\n            onChange={e => props.onChange(e.target.value)}\r\n          />\r\n          :\r\n          <DataGrid\r\n            hideFooter\r\n            rows={props.text.split(/\\r?\\n/).map(l => ({ data: l }))}\r\n            columns={columns}\r\n            disableSelectionOnClick\r\n            disableColumnMenu\r\n            experimentalFeatures={{ newEditingApi: true }}\r\n          />\r\n        }\r\n      </Box>\r\n      {isEditMode &&\r\n        <Box sx={{ pr: 4 }}>\r\n          <LoadingButton\r\n            loading={isSaving}\r\n            variant=\"contained\"\r\n            onClick={onSaveClick}\r\n          >\r\n            Save\r\n          </LoadingButton>\r\n        </Box>\r\n      }\r\n    </>\r\n  );\r\n}\r\n\r\nfunction AddScribble(props: {\r\n  onAdded: (name: ScribbleRes) => void,\r\n}) {\r\n  const [name, setName] = useState('');\r\n  const [isAdding, setIsAdding] = useState(false);\r\n\r\n  const onAddClick = async () => {\r\n    setIsAdding(true);\r\n    const { data } = await axios.post<ScribbleRes>(\r\n      '/create_scribble',\r\n      { name, text: '' },\r\n    );\r\n    props.onAdded(data)\r\n    setIsAdding(false);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <TextField\r\n        sx={{ display: 'block', pb: 2 }}\r\n        label=\"Scribble Name\"\r\n        variant=\"outlined\"\r\n        value={name}\r\n        onChange={e => setName(e.target.value)}\r\n      />\r\n      <LoadingButton\r\n        loading={isAdding}\r\n        variant=\"contained\"\r\n        onClick={onAddClick}>\r\n        Add\r\n      </LoadingButton>\r\n    </Box>\r\n  );\r\n}","import Autocomplete, { createFilterOptions } from '@mui/material/Autocomplete';\r\nimport Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport TextField from '@mui/material/TextField';\r\nimport Typography from '@mui/material/Typography';\r\nimport axios from 'axios';\r\nimport useAxios from 'axios-hooks';\r\nimport React, { useEffect, useState } from 'react';\r\nimport { AlwaysBuyItemsRes, EveAssetsLocationsRes, EveSdeTypesRes, MaterialStationsRes } from '@internal/shared';\r\nimport { uniq } from 'underscore';\r\n\r\nexport default function DashboardConfigurationCard() {\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <Box sx={{ pb: 2 }}>\r\n          <Typography variant=\"h6\">\r\n            Configuration\r\n          </Typography>\r\n        </Box>\r\n        <Box sx={{ pb: 2 }}>\r\n          <MaterialStationConfig />\r\n        </Box>\r\n        {/* <AlwaysBuyConfig /> */}\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nfunction MaterialStationConfig() {\r\n  const [{\r\n    data: assetLocations,\r\n    loading: loadingAssets,\r\n  }] = useAxios<EveAssetsLocationsRes>('/assets_locations');\r\n\r\n  const locations: MaterialStationsRes = assetLocations\r\n    ? uniq(assetLocations, d => d.locationId).map(a => ({\r\n      station_name: a.locationName,\r\n      station_id: a.locationId,\r\n    }))\r\n    : [];\r\n\r\n  const [{\r\n    data: materialStations,\r\n    loading: loadingStations,\r\n  }] = useAxios<MaterialStationsRes>('/material_stations');\r\n\r\n  const [stations, setStations] = useState<MaterialStationsRes>([]);\r\n  useEffect(() => setStations(materialStations ?? []), [materialStations]);\r\n\r\n  const [updatingStations, setUpdatingStations] = useState(false);\r\n  const onChange = async (values: MaterialStationsRes) => {\r\n    setUpdatingStations(true);\r\n    setStations(values);\r\n    const { data } = await axios.post<MaterialStationsRes>(\r\n      '/material_stations_update',\r\n      { stations: values },\r\n    );\r\n    setStations(data);\r\n    setUpdatingStations(false);\r\n  };\r\n\r\n  return (\r\n    <Autocomplete\r\n      multiple\r\n      loading={loadingStations}\r\n      options={locations}\r\n      getOptionLabel={(option: any) => option.station_name}\r\n      filterSelectedOptions\r\n      isOptionEqualToValue={\r\n        (option, value) => option.station_id === value.station_id\r\n      }\r\n      value={stations}\r\n      onChange={(_, values) => { onChange(values); }}\r\n      renderInput={(params) => (\r\n        <TextField\r\n          {...params}\r\n          label=\"Stations\"\r\n          InputProps={{\r\n            ...params.InputProps,\r\n            endAdornment: ((loadingAssets || updatingStations) &&\r\n              <React.Fragment>\r\n                {<CircularProgress color=\"inherit\" size={20} />}\r\n                {params.InputProps.endAdornment}\r\n              </React.Fragment>\r\n            ),\r\n          }}\r\n        />\r\n      )}\r\n    />\r\n  );\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nfunction AlwaysBuyConfig() {\r\n  // TODO refresh production plan, possibly use isolated as recoil\r\n  const [{\r\n    data: typesData,\r\n    loading: loadingTypes,\r\n  }] = useAxios<EveSdeTypesRes>('/type_ids_items');\r\n  const autocompleteData: AlwaysBuyItemsRes = typesData?.map(d => ({\r\n    typeId: d.id,\r\n    typeName: d.name,\r\n  })) || [];\r\n\r\n  const [{\r\n    data: alwaysBuyData,\r\n    loading: loadingAlwaysBuy,\r\n  }] = useAxios<AlwaysBuyItemsRes>('/always_buy_items');\r\n\r\n  const [alwaysBuy, setAlwaysBuy] = useState<AlwaysBuyItemsRes>([]);\r\n  useEffect(() => setAlwaysBuy(alwaysBuyData ?? []), [alwaysBuyData]);\r\n\r\n  const [updatingAlwaysBuy, setUpdatingAlwaysBuy] = useState(false);\r\n  const onChange = async (values: AlwaysBuyItemsRes) => {\r\n    setUpdatingAlwaysBuy(true);\r\n    setAlwaysBuy(values);\r\n    const { data } = await axios.post<AlwaysBuyItemsRes>(\r\n      '/always_buy_items_update',\r\n      { typeIds: values.map(v => v.typeId) },\r\n    );\r\n    setAlwaysBuy(data);\r\n    setUpdatingAlwaysBuy(false);\r\n  };\r\n\r\n  return (\r\n    <Autocomplete\r\n      multiple\r\n      loading={loadingAlwaysBuy}\r\n      options={autocompleteData ?? []}\r\n      filterOptions={createFilterOptions({ matchFrom: 'any', limit: 10 })}\r\n      getOptionLabel={option => option.typeName}\r\n      isOptionEqualToValue={(option, value) => option.typeId === value.typeId}\r\n      value={alwaysBuy}\r\n      onChange={(_, values) => { onChange(values); }}\r\n      renderOption={(props, option: any) =>\r\n        <li\r\n          {...props}\r\n          style={{\r\n            paddingLeft: '8px',\r\n            paddingTop: '2px',\r\n            paddingBottom: '2px',\r\n          }}\r\n        >\r\n          <Typography variant=\"subtitle2\" gutterBottom>\r\n            {option.typeName}\r\n          </Typography>\r\n        </li>\r\n      }\r\n      renderInput={(params) => (\r\n        <TextField\r\n          {...params}\r\n          label=\"Always Buy Item\"\r\n          InputProps={{\r\n            ...params.InputProps,\r\n            endAdornment: ((loadingTypes || updatingAlwaysBuy) &&\r\n              <React.Fragment>\r\n                {<CircularProgress color=\"inherit\" size={20} />}\r\n                {params.InputProps.endAdornment}\r\n              </React.Fragment>\r\n            ),\r\n          }}\r\n        />\r\n      )}\r\n    />\r\n  );\r\n}","import Box from '@mui/material/Box';\r\nimport Grid from '@mui/material/Grid';\r\nimport DashboardProductionPlanCard from './DashboardProductionPlanCard';\r\nimport DashboardProductsCard from './DashboardProductsCard';\r\nimport DashboardScribblesCard from './DashboardScribblesCard';\r\nimport DashboardConfigurationCard from './DashboardConfigurationCard';\r\n\r\nexport default function DashboardPage() {\r\n  return (\r\n    <Grid container spacing={2}>\r\n      <Grid item xs={6}>\r\n        <Box sx={{ pb: 4 }}>\r\n          <DashboardProductsCard />\r\n        </Box>\r\n        <Box sx={{ pb: 4 }}>\r\n          <DashboardScribblesCard />\r\n        </Box>\r\n        <DashboardConfigurationCard />\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        <DashboardProductionPlanCard />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}","import { WalletTransactionsRes } from '@internal/shared';\r\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\r\nimport EveIconAndName from 'components/util/EveIconAndName';\r\nimport { ColoredNumber, formatNumber } from 'components/util/numbers';\r\nimport { format } from 'date-fns';\r\n\r\nconst columns: GridColDef[] = [\r\n  {\r\n    field: 'name',\r\n    headerName: 'Name',\r\n    width: 280,\r\n    sortable: false,\r\n    renderCell: params =>\r\n      <EveIconAndName\r\n        typeId={params.row.typeId}\r\n        categoryId={params.row.categoryId}\r\n        name={params.row.name}\r\n      />,\r\n  },\r\n  {\r\n    field: 'quantity',\r\n    headerName: 'Quantity',\r\n    width: 80,\r\n    align: 'right',\r\n    sortable: false,\r\n  },\r\n  {\r\n    field: 'unitPrice',\r\n    headerName: 'Unit Price',\r\n    width: 100,\r\n    align: 'right',\r\n    sortable: false,\r\n    valueFormatter: params => formatNumber(params.value),\r\n  },\r\n  {\r\n    field: 'total',\r\n    headerName: 'Total',\r\n    width: 100,\r\n    align: 'right',\r\n    sortable: false,\r\n    renderCell: params =>\r\n      <ColoredNumber\r\n        number={params.row.quantity * params.row.unitPrice}\r\n        color={params.row.isBuy ? 'red' : 'green'}\r\n      />,\r\n  },\r\n  {\r\n    field: 'locationName',\r\n    headerName: 'Location',\r\n    width: 350,\r\n    sortable: false,\r\n  },\r\n  {\r\n    field: 'date',\r\n    headerName: 'Time',\r\n    width: 150,\r\n    sortable: false,\r\n    valueFormatter: params => format(\r\n      new Date(params.value),\r\n      'yyyy.MM.dd - HH:mm',\r\n    ),\r\n  },\r\n  {\r\n    field: 'characterName',\r\n    headerName: 'Character',\r\n    width: 150,\r\n    sortable: false,\r\n  },\r\n];\r\n\r\n/**\r\n * Shows the data grid of all transactions.\r\n */\r\nexport default function AllMarketTransactionsDataGrid(props: {\r\n  data: WalletTransactionsRes,\r\n}) {\r\n  return (\r\n    <DataGrid\r\n      initialState={{\r\n        sorting: {\r\n          sortModel: [{ field: 'date', sort: 'desc' }],\r\n        },\r\n      }}\r\n      rows={props.data}\r\n      columns={columns}\r\n      disableSelectionOnClick\r\n      disableColumnMenu\r\n      experimentalFeatures={{ newEditingApi: true }}\r\n    />\r\n  );\r\n}","import { WalletTransactionsRes } from \"@internal/shared\";\r\nimport { DataGrid, GridColDef } from \"@mui/x-data-grid\";\r\nimport EveIconAndName from \"components/util/EveIconAndName\";\r\nimport { ColoredNumber } from \"components/util/numbers\";\r\nimport { transactionAggregate } from \"./transactionAggregate\";\r\n\r\nconst columns: GridColDef[] = [\r\n  {\r\n    field: 'name',\r\n    headerName: 'Name',\r\n    width: 300,\r\n    sortable: false,\r\n    renderCell: params =>\r\n      <EveIconAndName\r\n        typeId={params.row.typeId}\r\n        categoryId={params.row.categoryId}\r\n        name={params.row.name}\r\n      />,\r\n  },\r\n  {\r\n    field: 'buyQuantity',\r\n    headerName: 'Bought',\r\n    width: 100,\r\n    align: 'right',\r\n    renderCell: params => <ColoredNumber number={params.value} color=\"red\" />,\r\n  },\r\n  {\r\n    field: 'sellQuantity',\r\n    headerName: 'Sold',\r\n    width: 100,\r\n    align: 'right',\r\n    renderCell: params => <ColoredNumber number={params.value} color=\"green\" />,\r\n  },\r\n  {\r\n    field: 'buyVolume',\r\n    headerName: 'Buy Volume',\r\n    width: 100,\r\n    align: 'right',\r\n    renderCell: params => <ColoredNumber number={params.value} color=\"red\" />,\r\n  },\r\n  {\r\n    field: 'sellVolume',\r\n    headerName: 'Sell Volume',\r\n    width: 100,\r\n    align: 'right',\r\n    renderCell: params => <ColoredNumber number={params.value} color=\"green\" />,\r\n  },\r\n  {\r\n    field: 'avgBuyPrice',\r\n    headerName: 'Avg Buy',\r\n    width: 100,\r\n    align: 'right',\r\n    renderCell: params => <ColoredNumber number={params.value} color=\"red\" />,\r\n  },\r\n  {\r\n    field: 'avgSellPrice',\r\n    headerName: 'Avg Sell',\r\n    width: 100,\r\n    align: 'right',\r\n    renderCell: params => <ColoredNumber number={params.value} color=\"green\" />,\r\n  },\r\n  {\r\n    field: 'avgDiff',\r\n    headerName: 'Avg Diff',\r\n    width: 100,\r\n    align: 'right',\r\n    renderCell: params =>\r\n      <ColoredNumber\r\n        number={params.value}\r\n        color={params.value < 0 ? 'red' : 'green'}\r\n      />,\r\n  },\r\n  {\r\n    field: 'gainPerc',\r\n    headerName: 'Gain %',\r\n    width: 100,\r\n    align: 'right',\r\n    renderCell: params =>\r\n      <ColoredNumber\r\n        number={params.value}\r\n        color={params.value < 0 ? 'red' : 'green'}\r\n        fractionDigits={1}\r\n      />,\r\n  },\r\n];\r\n\r\n/**\r\n * Aggregated transactions and shows some useful data such as\r\n * number of items bought/sold, average price and so on\r\n */\r\nexport default function AggregatedTransactionsDataGrid(props: {\r\n  data: WalletTransactionsRes,\r\n}) {\r\n  const aggregatedData = transactionAggregate(props.data);\r\n\r\n  return (\r\n    <DataGrid\r\n      rows={aggregatedData}\r\n      columns={columns}\r\n      sortModel={[{ field: 'sellVolume', sort: 'desc' }]}\r\n      disableSelectionOnClick\r\n      disableColumnMenu\r\n    />\r\n  );\r\n}","import { WalletTransactionsRes } from \"@internal/shared\";\r\nimport { sum } from \"mathjs\";\r\nimport { groupBy } from \"underscore\";\r\n\r\ntype TransactionAggregate = {\r\n  buyQuantity: any;\r\n  sellQuantity: any;\r\n  buyVolume: any;\r\n  sellVolume: any;\r\n  avgBuyPrice: number;\r\n  avgSellPrice: number;\r\n  avgDiff: number;\r\n  gainPerc: number;\r\n  typeId: number;\r\n  categoryId: number | undefined;\r\n  name: string;\r\n}[];\r\n\r\nexport function transactionAggregate(\r\n  data: WalletTransactionsRes,\r\n): TransactionAggregate {\r\n  return Object.values(\r\n    groupBy(data, 'typeId')\r\n  ).filter(transactions =>\r\n    transactions.some(t => t.isBuy) && transactions.some(t => !t.isBuy)\r\n  ).map(transactions => {\r\n    const buyTransactions = transactions.filter(t => t.isBuy);\r\n    const sellTransactions = transactions.filter(t => !t.isBuy);\r\n\r\n    const buyQuantity = sum(buyTransactions.map(t => t.quantity));\r\n    const sellQuantity = sum(sellTransactions.map(t => t.quantity));\r\n\r\n    const buyVolume = sum(buyTransactions.map(t => t.quantity * t.unitPrice));\r\n    const sellVolume = sum(sellTransactions.map(t => t.quantity * t.unitPrice));\r\n\r\n    // Because of the filter, there should always be at least one \r\n    // buy and sell transaction\r\n    const avgBuyPrice = buyVolume / buyQuantity;\r\n    const avgSellPrice = sellVolume / sellQuantity;\r\n\r\n    const avgDiff = avgSellPrice - avgBuyPrice;\r\n\r\n    const gainPerc = 100 * avgDiff / avgSellPrice;\r\n    return {\r\n      buyQuantity,\r\n      sellQuantity,\r\n      buyVolume,\r\n      sellVolume,\r\n      avgBuyPrice,\r\n      avgSellPrice,\r\n      avgDiff,\r\n      gainPerc,\r\n      typeId: transactions[0].typeId,\r\n      categoryId: transactions[0].categoryId,\r\n      name: transactions[0].name,\r\n    };\r\n  });\r\n}","import useAxios from 'axios-hooks';\r\nimport { useState } from 'react';\r\nimport Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport TextField from '@mui/material/TextField';\r\nimport { WalletTransactionsRes } from '@internal/shared';\r\nimport { isAfter, isBefore, subDays } from 'date-fns';\r\nimport { DesktopDatePicker, LocalizationProvider, enUS } from '@mui/x-date-pickers';\r\nimport { AdapterDateFns } from '@mui/x-date-pickers/AdapterDateFns';\r\nimport { Grid, MenuItem, Select, Tab, Tabs } from '@mui/material';\r\nimport AllMarketTransactionsDataGrid from './AllMarketTransactionsDataGrid';\r\nimport AggregatedTransactionsDataGrid from './AggregatedTransactionsDataGrid';\r\nimport { uniq } from 'underscore';\r\nimport OverallTransactionDataGrid from './OverallTransactionDataGrid';\r\n\r\nenum SelectedTab {\r\n  TRANSACTIONS = 'TRANSACTIONS',\r\n  AGGREGATED = 'AGGREGATED',\r\n  OVERALL = 'OVERALL',\r\n};\r\n\r\nconst ALL_CHARACTERS = '-ALL-';\r\n\r\nexport default function MarketTransactionsPage() {\r\n  const [{ data }] = useAxios<WalletTransactionsRes>('/wallet_transactions');\r\n\r\n  const characterNames = uniq(data?.map(d => d.characterName) ?? []);\r\n\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  const [startDate, setStartDate] = useState(subDays(new Date(), 30));\r\n  const [endDate, setEndDate] = useState(new Date())\r\n\r\n  const [selectedCharacter, setSelectedCharacter] = useState<string>(ALL_CHARACTERS);\r\n\r\n  const [selectedTab, setSelectedTab] = useState(SelectedTab.AGGREGATED);\r\n\r\n  const isIncluded = (s: string) =>\r\n    s.toLowerCase().includes(searchText.toLowerCase());\r\n  const filteredData = data && data.filter(d =>\r\n    (\r\n      (d.name && isIncluded(d.name))\r\n      || (d.locationName && isIncluded(d.locationName))\r\n    )\r\n    && isBefore(new Date(d.date), endDate)\r\n    && isAfter(new Date(d.date), startDate)\r\n    && (selectedCharacter === ALL_CHARACTERS || selectedCharacter === d.characterName)\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <Grid container spacing={2} alignItems=\"center\" sx={{ pb: 2 }}>\r\n        <Grid item>\r\n          <TextField\r\n            InputProps={{\r\n              sx: {\r\n                backgroundColor: 'white',\r\n              }\r\n            }}\r\n            label=\"Search...\"\r\n            variant=\"outlined\"\r\n            value={searchText}\r\n            onChange={e => setSearchText(e.target.value)}\r\n          />\r\n        </Grid>\r\n        <Grid item>\r\n          <LocalizationProvider\r\n            localeText={enUS.components.MuiLocalizationProvider.defaultProps.localeText}\r\n            dateAdapter={AdapterDateFns}>\r\n            <DesktopDatePicker\r\n              sx={{ backgroundColor: 'white' }}\r\n              label=\"Start Date\"\r\n              value={startDate}\r\n              onChange={newValue => newValue && setStartDate(newValue)}\r\n            />\r\n          </LocalizationProvider>\r\n        </Grid>\r\n        <Grid item>\r\n          <LocalizationProvider\r\n            localeText={enUS.components.MuiLocalizationProvider.defaultProps.localeText}\r\n            dateAdapter={AdapterDateFns}>\r\n            <DesktopDatePicker\r\n              sx={{ backgroundColor: 'white' }}\r\n              label=\"End Date\"\r\n              value={endDate}\r\n              onChange={newValue => newValue && setEndDate(newValue)}\r\n            />\r\n          </LocalizationProvider>\r\n        </Grid>\r\n        <Grid item>\r\n          <Select\r\n            sx={{ width: 250, backgroundColor: 'white' }}\r\n            value={selectedCharacter}\r\n            onChange={event => setSelectedCharacter(event.target.value)}\r\n            label=\"Character\"\r\n          >\r\n            <MenuItem value={ALL_CHARACTERS}>All</MenuItem>\r\n            {characterNames.map(name =>\r\n              <MenuItem key={name} value={name}>{name}</MenuItem>\r\n            )}\r\n          </Select>\r\n        </Grid>\r\n      </Grid>\r\n      <Card>\r\n        <CardContent>\r\n          <Tabs\r\n            sx={{\r\n              mb: 2,\r\n              borderBottom: 1,\r\n              borderColor: 'divider',\r\n            }}\r\n            value={selectedTab}\r\n            onChange={(_, newValue) => setSelectedTab(newValue)}\r\n          >\r\n            <Tab label=\"Aggregated\" value={SelectedTab.AGGREGATED} />\r\n            <Tab label=\"Transactions\" value={SelectedTab.TRANSACTIONS} />\r\n            <Tab label=\"Overall\" value={SelectedTab.OVERALL} />\r\n          </Tabs>\r\n          <Box\r\n            sx={{ height: 'auto', width: '100%' }}\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            {filteredData\r\n              ? (\r\n                <>\r\n                  {selectedTab === SelectedTab.AGGREGATED &&\r\n                    <AggregatedTransactionsDataGrid data={filteredData} />\r\n                  }\r\n                  {selectedTab === SelectedTab.TRANSACTIONS &&\r\n                    <AllMarketTransactionsDataGrid data={filteredData} />\r\n                  }\r\n                  {selectedTab === SelectedTab.OVERALL &&\r\n                    <OverallTransactionDataGrid data={filteredData} />\r\n                  }\r\n                </>\r\n              )\r\n              : <CircularProgress />\r\n            }\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    </div >\r\n  );\r\n}\r\n","import { WalletTransactionsRes } from \"@internal/shared\";\r\nimport { BarChart } from \"@mui/x-charts\";\r\nimport { format } from \"date-fns\";\r\nimport { sum } from \"mathjs\";\r\nimport { groupBy } from \"underscore\";\r\nimport { transactionAggregate } from \"./transactionAggregate\";\r\n\r\nexport default function OverallTransactionDataGrid(props: {\r\n  data: WalletTransactionsRes,\r\n}) {\r\n  const datedData = Object.entries(groupBy(\r\n    props.data.filter(transaction => !transaction.isBuy),\r\n    transaction => format(new Date(transaction.date), 'yyyy-MM-dd'),\r\n  ));\r\n  const volumePerDay = datedData.map(([date, transactions]) =>\r\n    [date, sum(transactions.map(t => t.quantity * t.unitPrice))] as const\r\n  ).sort((a, b) => a[0].localeCompare(b[0]));\r\n\r\n  // TODO not very accurate\r\n  // const aggregatedData = transactionAggregate(props.data);\r\n  // let avgDiffByTypeId: Record<number, number> = {};\r\n  // aggregatedData.forEach(data => {\r\n  //   avgDiffByTypeId[data.typeId] = data.avgDiff;\r\n  // });\r\n  // const gainPerDay = datedData.map(([date, transactions]) =>\r\n  //   [\r\n  //     date,\r\n  //     sum(transactions.map(t => t.quantity * (avgDiffByTypeId[t.typeId] ?? 0)))\r\n  //   ] as const\r\n  // );\r\n\r\n  return (\r\n    <>\r\n      <BarChart\r\n        xAxis={[{ scaleType: 'band', data: volumePerDay.map(d => d[0]) }]}\r\n        series={[{ data: volumePerDay.map(d => d[1]), color: 'green' }]}\r\n        width={500}\r\n        height={300}\r\n      />\r\n      {/* <BarChart\r\n        xAxis={[{ scaleType: 'band', data: gainPerDay.map(d => d[0]) }]}\r\n        series={[{ data: gainPerDay.map(d => d[1]), color: 'green' }]}\r\n        width={500}\r\n        height={300}\r\n      /> */}\r\n    </>\r\n  );\r\n}","import useAxios from 'axios-hooks';\r\nimport { useState } from 'react';\r\nimport { addDays, formatDistanceToNowStrict } from 'date-fns';\r\nimport Box from '@mui/material/Box';\r\nimport Card from '@mui/material/Card';\r\nimport CardContent from '@mui/material/CardContent';\r\nimport CircularProgress from '@mui/material/CircularProgress';\r\nimport TextField from '@mui/material/TextField';\r\nimport Typography from '@mui/material/Typography';\r\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\r\nimport { MarketOrdersRes } from '@internal/shared';\r\nimport EveIconAndName from 'components/util/EveIconAndName';\r\n\r\nexport default function MarketOrdersPage() {\r\n  const [{ data }] = useAxios<MarketOrdersRes>('/market_orders');\r\n\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  const isIncluded = (s: string) =>\r\n    s.toLowerCase().includes(searchText.toLowerCase());\r\n  const filteredData = data && data.filter(d =>\r\n    (d.name && isIncluded(d.name))\r\n    || (d.locationName && isIncluded(d.locationName))\r\n  );\r\n\r\n  const buyOrders = filteredData && filteredData.filter(o => o.isBuy);\r\n  const sellOrders = filteredData && filteredData.filter(o => !o.isBuy);\r\n\r\n  const columns: GridColDef[] = [\r\n    {\r\n      field: 'name',\r\n      headerName: 'Name',\r\n      width: 300,\r\n      sortable: false,\r\n      renderCell: params =>\r\n        <EveIconAndName\r\n          typeId={params.row.typeId}\r\n          categoryId={params.row.categoryId}\r\n          name={params.row.name}\r\n        />,\r\n    },\r\n    {\r\n      field: 'volume',\r\n      headerName: 'Volume',\r\n      width: 150,\r\n      align: 'right',\r\n      sortable: false,\r\n      valueGetter: params =>\r\n        params.row.volumeRemain + ' / ' + params.row.volumeTotal,\r\n    },\r\n    {\r\n      field: 'price',\r\n      headerName: 'Price',\r\n      width: 100,\r\n      align: 'right',\r\n      sortable: false,\r\n      valueFormatter: params => params.value.toLocaleString('en-US'),\r\n    },\r\n    {\r\n      field: 'locationName',\r\n      headerName: 'Location',\r\n      width: 350,\r\n      sortable: false,\r\n    },\r\n    {\r\n      field: 'expires',\r\n      headerName: 'Expires',\r\n      width: 100,\r\n      sortable: false,\r\n      valueGetter: params => formatDistanceToNowStrict(\r\n        addDays(new Date(params.row.issuedDate), params.row.duration),\r\n        { addSuffix: true, unit: 'day' }\r\n      ),\r\n    },\r\n    {\r\n      field: 'characterName',\r\n      headerName: 'Character',\r\n      width: 150,\r\n      sortable: false,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Box sx={{ pb: 2 }}>\r\n        <TextField\r\n          InputProps={{\r\n            sx: {\r\n              backgroundColor: 'white',\r\n            }\r\n          }}\r\n          label=\"Search...\"\r\n          variant=\"outlined\"\r\n          value={searchText}\r\n          onChange={e => setSearchText(e.target.value)}\r\n        />\r\n      </Box>\r\n      <Card>\r\n        <CardContent>\r\n          <Box sx={{ pb: 1 }}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Sell Orders\r\n            </Typography>\r\n          </Box>\r\n          <Box\r\n            sx={{ height: 'auto', width: '100%' }}\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            {sellOrders ?\r\n              <DataGrid\r\n                rows={sellOrders}\r\n                columns={columns}\r\n                disableSelectionOnClick\r\n                disableColumnMenu\r\n                experimentalFeatures={{ newEditingApi: true }}\r\n              />\r\n              : <CircularProgress />\r\n            }\r\n          </Box>\r\n          <Box sx={{ pb: 1, pt: 2 }}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Buy Orders\r\n            </Typography>\r\n          </Box>\r\n          <Box\r\n            sx={{ height: 'auto', width: '100%' }}\r\n            display=\"flex\"\r\n            justifyContent=\"center\"\r\n            alignItems=\"center\"\r\n          >\r\n            {buyOrders ?\r\n              <DataGrid\r\n                rows={buyOrders}\r\n                columns={columns}\r\n                disableSelectionOnClick\r\n                disableColumnMenu\r\n                experimentalFeatures={{ newEditingApi: true }}\r\n              />\r\n              : <CircularProgress />\r\n            }\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n    </div>\r\n  );\r\n}","import Grid from '@mui/material/Grid';\r\nimport TextField from '@mui/material/TextField';\r\nimport { useState } from 'react';\r\nimport { isNaN } from 'underscore';\r\n\r\nexport default function MarketComparisonPage() {\r\n  const [marketExport1, setMarketExport1] = useState('');\r\n  const [marketExport2, setMarketExport2] = useState('');\r\n\r\n  const items1: { [k: string]: string[] } = marketExport1 === '' ? {} :\r\n    marketExport1.split('\\n')\r\n      .map(line => line.split('\\t'))\r\n      .slice(0, -1)\r\n      .reduce((obj: { [k: string]: string[] }, tuple) => {\r\n        obj[tuple[0]] = tuple;\r\n        return obj;\r\n      }, {});\r\n  const items2: { [k: string]: string[] } = marketExport1 === '' ? {} :\r\n    marketExport2.split('\\n')\r\n      .map(line => line.split('\\t'))\r\n      .slice(0, -1)\r\n      .reduce((obj: { [k: string]: string[] }, tuple) => {\r\n        obj[tuple[0]] = tuple;\r\n        return obj;\r\n      }, {});\r\n\r\n  const buy1: [string, string][] = [];\r\n  const buy2: [string, string][] = [];\r\n  Object.entries(items1).forEach(([itemName1, itemData1]) => {\r\n    const itemData2 = items2[itemName1];\r\n    if (itemData2 === undefined) {\r\n      buy1.push([itemData1[0], itemData1[1]]);\r\n      return;\r\n    }\r\n\r\n    const price1 = parseFloat(itemData1[2].replace(/,/g, ''))\r\n    const price2 = parseFloat(itemData2[2].replace(/,/g, ''))\r\n\r\n    if (isNaN(price2) || price1 < price2) {\r\n      buy1.push([itemData1[0], itemData1[1]]);\r\n    } else {\r\n      buy2.push([itemData2[0], itemData2[1]]);\r\n    }\r\n  });\r\n  Object.entries(items2).forEach(([itemName2, itemData2]) => {\r\n    const itemData1 = items1[itemName2];\r\n    if (itemData1 === undefined) {\r\n      buy1.push([itemData2[0], itemData2[1]]);\r\n      return;\r\n    }\r\n  });\r\n\r\n  return (\r\n    <Grid container spacing={2}>\r\n      <Grid item xs={6}>\r\n        <TextField\r\n          InputProps={{\r\n            sx: {\r\n              backgroundColor: 'white',\r\n            }\r\n          }}\r\n          fullWidth\r\n          multiline\r\n          rows={15}\r\n          placeholder=\"Market Export 1\"\r\n          value={marketExport1}\r\n          onChange={e => setMarketExport1(e.target.value)}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        <TextField\r\n          InputProps={{\r\n            sx: {\r\n              backgroundColor: 'white',\r\n            }\r\n          }}\r\n          fullWidth\r\n          multiline\r\n          rows={15}\r\n          placeholder=\"Market Export 2\"\r\n          value={marketExport2}\r\n          onChange={e => setMarketExport2(e.target.value)}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        <TextField\r\n          InputProps={{\r\n            sx: {\r\n              backgroundColor: 'white',\r\n            },\r\n            readOnly: true,\r\n          }}\r\n          fullWidth\r\n          multiline\r\n          rows={15}\r\n          placeholder=\"Buy 1\"\r\n          value={buy1.map(b => `${b[0]} ${b[1]}`).join('\\n')}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={6}>\r\n        <TextField\r\n          InputProps={{\r\n            sx: {\r\n              backgroundColor: 'white',\r\n            },\r\n            readOnly: true,\r\n          }}\r\n          fullWidth\r\n          multiline\r\n          rows={15}\r\n          placeholder=\"Buy 2\"\r\n          value={buy2.map(b => `${b[0]} ${b[1]}`).join('\\n')}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}","import useAxios from 'axios-hooks';\r\nimport { LinkedCharacterRes } from '@internal/shared';\r\nimport { Box, Card, CardContent, CardMedia, Grid, Typography } from '@mui/material';\r\n\r\nexport default function CharactersPage() {\r\n  const [{ data }] = useAxios<LinkedCharacterRes>('/linked_characters');\r\n\r\n  if (data === undefined) {\r\n    return <Box></Box>\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={2}>{\r\n      data.map(character => (\r\n        <Grid item width={200} key={character.characterName}>\r\n          <CharacterCard character={character} />\r\n        </Grid>\r\n      ))\r\n    }\r\n    </Grid>\r\n  );\r\n}\r\n\r\nfunction CharacterCard(\r\n  { character }: { character: LinkedCharacterRes[number] },\r\n) {\r\n  return (\r\n    <Card key={character.characterId}>\r\n      <CardMedia\r\n        sx={{ pt: 2, pl: 2, pr: 2 }}\r\n        component=\"img\"\r\n        image={character.portrait}\r\n      />\r\n      <CardContent>\r\n        <Box sx={{\r\n          display: 'flex',\r\n          justifyContent: 'center',\r\n        }}>\r\n          <Typography gutterBottom variant=\"subtitle2\" component=\"div\">\r\n            {character.characterName}\r\n          </Typography>\r\n        </Box>\r\n      </CardContent>\r\n    </Card >\r\n  );\r\n}","import { MarketHistoryRes } from '@internal/shared';\r\nimport { formatNumber, formatNumberScale } from 'components/util/numbers';\r\nimport { mean } from 'mathjs';\r\n\r\nexport function createHeuristic(\r\n  history: MarketHistoryRes,\r\n): { name: string, value: string, value_3_days: string }[] {\r\n  const recentHistory = history.slice(-3);\r\n  return [\r\n    {\r\n      name: 'Avg Volume',\r\n      value: formatNumber(mean(history.map(h => h.volume))),\r\n      value_3_days: formatNumber(mean(recentHistory.map(h => h.volume))),\r\n    },\r\n    {\r\n      name: 'Avg ISK Volume',\r\n      value: formatNumberScale(mean(history.map(h => h.volume * h.average))),\r\n      value_3_days: formatNumberScale(\r\n        mean(recentHistory.map(h => h.volume * h.average))\r\n      ),\r\n    },\r\n    {\r\n      name: 'Avg Price',\r\n      value: formatNumber(mean(history.map(h => h.average))),\r\n      value_3_days: formatNumber(mean(recentHistory.map(h => h.average))),\r\n    },\r\n    {\r\n      name: 'Avg Price DIff',\r\n      value: formatNumber(mean(history.map(h => h.highest - h.lowest))),\r\n      value_3_days: formatNumber(\r\n        mean(recentHistory.map(h => h.highest - h.lowest))\r\n      ),\r\n    },\r\n    {\r\n      name: 'Avg Gain Perc',\r\n      value: formatNumber(\r\n        mean(history.map(h => 100 * (h.highest - h.lowest) / h.highest)),\r\n        2,\r\n      ),\r\n      value_3_days: formatNumber(\r\n        mean(recentHistory.map(h => 100 * (h.highest - h.lowest) / h.highest)),\r\n        2,\r\n      ),\r\n    },\r\n  ];\r\n}\r\n","import { useState } from 'react';\r\nimport { Box } from '@mui/material';\r\nimport { LoadingButton } from '@mui/lab';\r\nimport axios from 'axios';\r\nimport { MarketHistoryRes } from '@internal/shared';\r\nimport { ChartContainer, LinePlot, ChartsYAxis, ChartsXAxis, BarPlot } from '@mui/x-charts';\r\nimport { format } from 'date-fns';\r\nimport { max, min } from 'mathjs';\r\nimport { formatNumberScale } from '../util/numbers';\r\nimport { createHeuristic } from './MarketItemScores';\r\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\r\nimport ItemAutocomplete from 'components/util/ItemAutocomplete';\r\n\r\nconst scoreColumns: GridColDef[] = [\r\n  {\r\n    field: 'name',\r\n    headerName: 'Name',\r\n    width: 200,\r\n  },\r\n  {\r\n    field: 'value',\r\n    headerName: 'Value',\r\n    width: 150,\r\n  },\r\n  {\r\n    field: 'value_3_days',\r\n    headerName: 'Value (last 3 days)',\r\n    width: 150,\r\n  },\r\n];\r\n\r\nexport default function MarketItemHistoryDataTab() {\r\n  const [itemName, setItemName] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [historyData, setHistoryData] = useState<MarketHistoryRes | null>(null);\r\n\r\n  const onSubmit = async () => {\r\n    setIsLoading(true);\r\n    const { data } = await axios.get<MarketHistoryRes>(\r\n      `/market_history/${itemName}`,\r\n    );\r\n    setHistoryData(data.sort((a, b) => a.date.localeCompare(b.date)));\r\n    setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <Box>\r\n      <Box sx={{ display: 'flex', gap: 4, pl: 2 }}>\r\n        <ItemAutocomplete\r\n          onInputChange={value => setItemName(value)}\r\n          width={350}\r\n        />\r\n        <LoadingButton\r\n          loading={isLoading}\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={onSubmit}\r\n        >\r\n          Submit\r\n        </LoadingButton>\r\n      </Box>\r\n      {historyData &&\r\n        <Box\r\n          sx={{ height: 'auto', width: '100%' }}\r\n          display=\"flex\"\r\n          justifyContent=\"center\"\r\n          alignItems=\"center\"\r\n        >\r\n          <ChartContainer\r\n            width={1000}\r\n            height={500}\r\n            series={[\r\n              {\r\n                type: 'line',\r\n                yAxisKey: 'line',\r\n                data: historyData.map(h => h.highest),\r\n                label: 'Highest',\r\n                color: 'green',\r\n                showMark: false,\r\n              },\r\n              {\r\n                type: 'line',\r\n                yAxisKey: 'line',\r\n                data: historyData.map(h => h.lowest),\r\n                label: 'Lowest',\r\n                color: 'red',\r\n                showMark: false,\r\n              },\r\n              {\r\n                type: 'line',\r\n                yAxisKey: 'line',\r\n                data: historyData.map(h => h.average),\r\n                label: 'Average',\r\n                color: 'orange',\r\n                showMark: false,\r\n              },\r\n              {\r\n                type: 'bar',\r\n                yAxisKey: 'bar',\r\n                data: historyData.map(h => h.volume),\r\n                color: 'green',\r\n              },\r\n            ]}\r\n            xAxis={[\r\n              {\r\n                id: 'time',\r\n                scaleType: 'band',\r\n                data: historyData.map(h => new Date(h.date)),\r\n                valueFormatter: date => format(date, 'yyyy-MM-dd'),\r\n              }\r\n            ]}\r\n            yAxis={[\r\n              {\r\n                id: 'line',\r\n                scaleType: 'linear',\r\n                min: 0.9 * min(historyData.map(h => h.lowest)),\r\n                // max: 0.98 * max(historyData.map(h => h.highest))\r\n                valueFormatter: num => formatNumberScale(num),\r\n              },\r\n              {\r\n                id: 'bar',\r\n                scaleType: 'linear',\r\n                max: 4 * max(historyData.map(h => h.volume)),\r\n              },\r\n            ]}\r\n          >\r\n            <BarPlot />\r\n            <LinePlot />\r\n            <ChartsYAxis position=\"left\" axisId=\"line\" />\r\n            <ChartsYAxis position=\"right\" axisId=\"bar\" />\r\n            <ChartsXAxis position=\"bottom\" axisId=\"time\" />\r\n          </ChartContainer>\r\n        </Box>\r\n      }\r\n      {historyData &&\r\n        <Box sx={{ p: 4 }}>\r\n          <DataGrid\r\n            sx={{ width: 550 }}\r\n            initialState={{\r\n              sorting: {\r\n                sortModel: [{ field: 'date', sort: 'desc' }],\r\n              },\r\n            }}\r\n            rows={createHeuristic(historyData)}\r\n            columns={scoreColumns}\r\n            disableSelectionOnClick\r\n            disableColumnMenu\r\n          />\r\n        </Box>\r\n      }\r\n    </Box>\r\n  );\r\n}","import { MarketabilityRes } from '@internal/shared';\r\nimport { Box, CircularProgress, TextField } from '@mui/material';\r\nimport { DataGrid, GridColDef } from '@mui/x-data-grid';\r\nimport useAxios from 'axios-hooks';\r\nimport EveIconAndName from 'components/util/EveIconAndName';\r\nimport { ColoredNumber, formatNumber } from 'components/util/numbers';\r\nimport { useState } from 'react';\r\n\r\nconst GOOD_AVG_DIFF = 0.1;\r\nconst GOOD_AVG_PRICE = 10000000;  // 10M\r\nconst GOOD_AVG_ISK_VOLUME = 10000000000;  // 10B\r\nconst GOOD_AVG_LINE_DIFF = [0.3, 0.7];\r\n\r\nconst columns: GridColDef[] = [\r\n  {\r\n    field: 'name',\r\n    headerName: 'Name',\r\n    width: 300,\r\n    sortable: false,\r\n    renderCell: params =>\r\n      <EveIconAndName\r\n        typeId={params.row.typeId}\r\n        categoryId={params.row.categoryId}\r\n        name={params.row.name}\r\n      />,\r\n  },\r\n  {\r\n    field: 'avgDiff',\r\n    headerName: 'Avg Diff %',\r\n    width: 100,\r\n    align: 'right',\r\n    renderCell: params =>\r\n      <ColoredNumber\r\n        color={params.value > GOOD_AVG_DIFF ? 'green' : 'red'}\r\n        number={params.value * 100}\r\n        fractionDigits={2}\r\n      />\r\n  },\r\n  {\r\n    field: 'avgPrice',\r\n    headerName: 'Avg Price',\r\n    width: 150,\r\n    align: 'right',\r\n    renderCell: params =>\r\n      <ColoredNumber\r\n        color={params.value > GOOD_AVG_PRICE ? 'green' : 'red'}\r\n        number={params.value}\r\n      />\r\n  },\r\n  {\r\n    field: 'avgIskVolume',\r\n    headerName: 'Avg ISK Volume',\r\n    width: 150,\r\n    align: 'right',\r\n    renderCell: params =>\r\n      <ColoredNumber\r\n        color={params.value > GOOD_AVG_ISK_VOLUME ? 'green' : 'red'}\r\n        number={params.value}\r\n      />\r\n  },\r\n  {\r\n    field: 'avgAvgLineDiff',\r\n    headerName: 'Avg Line Diff',\r\n    width: 120,\r\n    align: 'right',\r\n    renderCell: params =>\r\n      <ColoredNumber\r\n        color={\r\n          params.value > GOOD_AVG_LINE_DIFF[0] && params.value < GOOD_AVG_LINE_DIFF[1]\r\n            ? 'green'\r\n            : 'red'\r\n        }\r\n        number={params.value}\r\n        fractionDigits={2}\r\n      />\r\n  },\r\n  {\r\n    field: 'avgVolume',\r\n    headerName: 'Avg Volume',\r\n    width: 120,\r\n    align: 'right',\r\n    renderCell: params => formatNumber(params.value)\r\n  },\r\n];\r\n\r\nexport default function MarketabiltyTab() {\r\n  const [{ data }] = useAxios<MarketabilityRes>('/marketability');\r\n\r\n  const [minDiff, setMinDiff] = useState('0.09');\r\n  const [minPrice, setMinPrice] = useState((5 * 1e6).toString());\r\n  const [minIskVolume, setMinIskVolume] = useState((2 * 1e9).toString());\r\n  const [searchText, setSearchText] = useState('');\r\n\r\n  const rowData = data?.map(d => ({\r\n    typeId: d.typeId,\r\n    name: d.name,\r\n    categoryId: d.categoryId,\r\n    ...d.scores.map(s => ({ [s.name]: s.value }))\r\n      .reduce((acc, obj) => ({ ...acc, ...obj }), {}),\r\n  }))?.filter(d =>\r\n    // @ts-ignore\r\n    d.avgDiff > Number(minDiff)\r\n    // @ts-ignore\r\n    && d.avgPrice > Number(minPrice)\r\n    // @ts-ignore\r\n    && d.avgIskVolume > Number(minIskVolume)\r\n    && d.name.toLowerCase().includes(searchText.toLowerCase())\r\n  );\r\n\r\n  return (\r\n    <Box>\r\n      <Box sx={{ p: 2, gap: 1 }} display=\"flex\">\r\n        <TextField\r\n          sx={{ width: 150 }}\r\n          label=\"Min Diff\"\r\n          variant=\"outlined\"\r\n          value={minDiff}\r\n          onChange={e => setMinDiff(e.target.value)}\r\n        />\r\n        <TextField\r\n          sx={{ width: 150 }}\r\n          label=\"Min Price\"\r\n          variant=\"outlined\"\r\n          value={minPrice}\r\n          onChange={e => setMinPrice(e.target.value)}\r\n        />\r\n        <TextField\r\n          sx={{ width: 150 }}\r\n          label=\"Min Isk Volume\"\r\n          variant=\"outlined\"\r\n          value={minIskVolume}\r\n          onChange={e => setMinIskVolume(e.target.value)}\r\n        />\r\n        <TextField\r\n          sx={{ width: 200 }}\r\n          label=\"Search\"\r\n          variant=\"outlined\"\r\n          value={searchText}\r\n          onChange={e => setSearchText(e.target.value)}\r\n        />\r\n      </Box>\r\n      <Box\r\n        sx={{ height: 'auto', width: '100%' }}\r\n        display=\"flex\"\r\n        justifyContent=\"center\"\r\n        alignItems=\"center\"\r\n      >\r\n        {rowData\r\n          ? (\r\n            <DataGrid\r\n              rows={rowData}\r\n              columns={columns}\r\n              disableSelectionOnClick\r\n              disableColumnMenu\r\n            />\r\n          )\r\n          : <CircularProgress />\r\n        }\r\n      </Box>\r\n    </Box>\r\n  );\r\n}","import { Card, CardContent, Tab, Tabs } from '@mui/material';\r\nimport { useState } from 'react';\r\nimport MarketItemHistoryDataTab from './MarketItemHistoryDataTab';\r\nimport MarketabiltyTab from './MarketabilityTab';\r\n\r\nenum SelectedTab {\r\n  MARKETABILITY = 'MARKETABILITY',\r\n  HISTORY = 'HISTORY',\r\n};\r\n\r\nexport default function MarketPredictionPage() {\r\n  const [selectedTab, setSelectedTab] = useState(SelectedTab.HISTORY);\r\n  return (\r\n    <div>\r\n      <Card>\r\n        <CardContent>\r\n          <Tabs\r\n            sx={{\r\n              mb: 2,\r\n              borderBottom: 1,\r\n              borderColor: 'divider',\r\n            }}\r\n            value={selectedTab}\r\n            onChange={(_, newValue) => setSelectedTab(newValue)}\r\n          >\r\n            <Tab label=\"History\" value={SelectedTab.HISTORY} />\r\n            <Tab label=\"Marketabilty\" value={SelectedTab.MARKETABILITY} />\r\n          </Tabs>\r\n          {selectedTab === SelectedTab.HISTORY &&\r\n            <MarketItemHistoryDataTab />\r\n          }\r\n          {selectedTab === SelectedTab.MARKETABILITY &&\r\n            <MarketabiltyTab />\r\n          }\r\n        </CardContent>\r\n      </Card>\r\n    </div >\r\n  );\r\n}","import Box from '@mui/material/Box';\r\nimport Toolbar from '@mui/material/Toolbar';\r\nimport DashboardIcon from '@mui/icons-material/Dashboard';\r\nimport AttachMoneyIcon from '@mui/icons-material/AttachMoney';\r\nimport CompareArrowsIcon from '@mui/icons-material/CompareArrows';\r\nimport ScienceIcon from '@mui/icons-material/Science';\r\nimport ReceiptLongIcon from '@mui/icons-material/ReceiptLong';\r\nimport TakeoutDiningIcon from '@mui/icons-material/TakeoutDining';\r\nimport LocalGroceryStoreIcon from '@mui/icons-material/LocalGroceryStore';\r\nimport StorefrontIcon from '@mui/icons-material/Storefront';\r\nimport SleddingIcon from '@mui/icons-material/Sledding';\r\nimport type { } from '@mui/x-data-grid/themeAugmentation';\r\nimport { useContext } from 'react';\r\nimport HomePageAppBar from 'components/homepage/HomePageAppBar';\r\nimport NavigationDrawer from 'components/NavigationDrawer';\r\nimport AssetsPage from 'components/AssetsPage';\r\nimport { CssBaseline, ThemeProvider } from '@mui/material';\r\nimport ContractsPage from 'components/ContractsPage';\r\nimport IndustryJobsPage from 'components/IndustryJobsPage';\r\nimport DashboardPage from 'components/dashboard/DashboardPage';\r\nimport { UserContext } from 'contexts/UserContext';\r\nimport EveLoginButton from './EveLoginButton';\r\nimport createAppTheme from 'theme/createAppTheme';\r\nimport MarketTransactionsPage from 'components/market_transactions/MarketTransactionsPage';\r\nimport MarketOrdersPage from 'components/MarketOrdersPage';\r\nimport { Route, Routes } from 'react-router-dom';\r\nimport MarketComparisonPage from 'components/MarketComparisonPage';\r\nimport CharactersPage from 'components/CharactersPage';\r\nimport MarketPredictionPage from 'components/market_predictions/MarketPredictionPage';\r\n\r\nexport default function HomePage() {\r\n  const userContext = useContext(UserContext);\r\n\r\n  const theme = createAppTheme();\r\n\r\n  const routes = [\r\n    {\r\n      path: '/',\r\n      label: 'Dashboard',\r\n      icon: <DashboardIcon />,\r\n      component: DashboardPage,\r\n    },\r\n    {\r\n      path: '/industry_jobs',\r\n      label: 'Industry Jobs',\r\n      icon: <ScienceIcon />,\r\n      component: IndustryJobsPage,\r\n    },\r\n    {\r\n      path: '/assets',\r\n      label: 'Assets',\r\n      icon: <TakeoutDiningIcon />,\r\n      component: AssetsPage,\r\n    },\r\n    {\r\n      path: '/contracts',\r\n      label: 'Contracts',\r\n      icon: <ReceiptLongIcon />,\r\n      component: ContractsPage,\r\n    },\r\n    {\r\n      path: '/transactions',\r\n      label: 'Transactions',\r\n      icon: <LocalGroceryStoreIcon />,\r\n      component: MarketTransactionsPage,\r\n    },\r\n    {\r\n      path: '/market_prediction',\r\n      label: 'Market Prediction',\r\n      icon: <AttachMoneyIcon />,\r\n      component: MarketPredictionPage,\r\n    },\r\n    {\r\n      path: '/market_orders',\r\n      label: 'Market Orders',\r\n      icon: <StorefrontIcon />,\r\n      component: MarketOrdersPage,\r\n    },\r\n    {\r\n      path: '/market_comparison',\r\n      label: 'Market Comparison',\r\n      icon: <CompareArrowsIcon />,\r\n      component: MarketComparisonPage,\r\n    },\r\n    {\r\n      path: '/character_settings',\r\n      label: 'Characters',\r\n      icon: <SleddingIcon />,\r\n      component: CharactersPage,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <Box sx={{ display: 'flex' }}>\r\n        <HomePageAppBar />\r\n        {userContext && userContext.is_logged_in\r\n          ?\r\n          <>\r\n            <NavigationDrawer routes={routes} />\r\n            <Box component=\"main\" sx={{ flexGrow: 1, p: 3 }}>\r\n              <Toolbar /> {/* need this to push the nav bar below the app bar */}\r\n              <Routes>\r\n                {routes.map((route: any) =>\r\n                  <Route\r\n                    path={route.path}\r\n                    key={route.path}\r\n                    element={<route.component />} />\r\n                )}\r\n              </Routes>\r\n            </Box>\r\n          </>\r\n          :\r\n          <Box sx={{ height: 300, width: 1 }}>\r\n            <Toolbar /> {/* need this to push the nav bar below the app bar */}\r\n            <Box\r\n              sx={{ height: '100%', width: 1 }}\r\n              display=\"flex\"\r\n              alignItems=\"center\"\r\n              justifyContent=\"center\"\r\n            >\r\n              <EveLoginButton useBlack />\r\n            </Box>\r\n          </Box>\r\n        }\r\n      </Box>\r\n    </ThemeProvider>\r\n  );\r\n}","import { createTheme } from '@mui/material';\r\nimport { uniqueId } from 'underscore';\r\n\r\nexport default function createAppTheme() {\r\n  return createTheme({\r\n    palette: {\r\n      background: {\r\n        default: 'rgba(210, 210, 210, .8)',\r\n      },\r\n    },\r\n    components: {\r\n      MuiToolbar: {\r\n        styleOverrides: {\r\n          root: {\r\n            '@media all': {\r\n              minHeight: 56,\r\n            }\r\n          }\r\n        }\r\n      },\r\n      MuiAppBar: {\r\n        styleOverrides: {\r\n          root: {\r\n            height: '56px',\r\n          }\r\n        }\r\n      },\r\n      MuiDataGrid: {\r\n        defaultProps: {\r\n          autoHeight: true,\r\n          density: 'compact',\r\n          getRowId: _ => uniqueId(),\r\n          pageSize: 100,\r\n          rowHeight: 40,\r\n          rowsPerPageOptions: [100],\r\n        },\r\n        styleOverrides: {\r\n          root: {\r\n            '& .MuiDataGrid-row:hover': {\r\n              backgroundColor: 'rgba(220, 220, 220, .5) !important',\r\n            },\r\n            '& .MuiDataGrid-virtualScrollerRenderZone': {\r\n              '& .MuiDataGrid-row': {\r\n                '&:nth-of-type(2n)': {\r\n                  // Every other row is gray\r\n                  backgroundColor: 'rgba(240, 240, 240, .5)',\r\n                },\r\n              },\r\n            },\r\n            '& .MuiDataGrid-columnHeaders': {\r\n              backgroundColor: 'rgba(200, 200, 200, 1.0)',\r\n            },\r\n            '& .MuiDataGrid-columnHeaderTitle': {\r\n              fontWeight: 'bold',\r\n            },\r\n          },\r\n        },\r\n      },\r\n    },\r\n  });\r\n}","import useAxios from 'axios-hooks';\r\nimport HomePage from 'components/homepage/HomePage';\r\nimport { defaultUserContextValue, UserContext } from 'contexts/UserContext';\r\nimport { EveLoggedInUserRes } from '@internal/shared';\r\nimport { Box, CircularProgress, Toolbar } from '@mui/material';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport { RecoilRoot } from 'recoil';\r\n\r\nfunction App() {\r\n  const [{ data, loading }] = useAxios<EveLoggedInUserRes>('/logged_in_user');\r\n  const userContext = data\r\n    ? {\r\n      ...data,\r\n      is_logged_in: data.character_ids.length > 0,\r\n    }\r\n    : defaultUserContextValue;\r\n\r\n  return (\r\n    <RecoilRoot>\r\n      <UserContext.Provider value={userContext}>\r\n        <BrowserRouter>\r\n          {loading\r\n            ?\r\n            <Box sx={{ height: 300, width: 1 }}>\r\n              <Toolbar /> {/* need this to push the nav bar below the app bar */}\r\n              <Box\r\n                sx={{ height: '100%', width: 1 }}\r\n                display=\"flex\"\r\n                alignItems=\"center\"\r\n                justifyContent=\"center\"\r\n              >\r\n                <CircularProgress />\r\n              </Box>\r\n            </Box>\r\n            :\r\n            <HomePage />}\r\n        </BrowserRouter>\r\n      </UserContext.Provider>\r\n    </RecoilRoot>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import axios from 'axios';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App';\r\n\r\naxios.defaults.baseURL = 'https://qmm534tebb.us-west-2.awsapprunner.com';\r\n// axios.defaults.baseURL = 'https://localhost:8080';\r\naxios.defaults.headers.post['Content-Type'] = 'application/json';\r\naxios.defaults.withCredentials = true;    // needed for cookies\r\n\r\nconst root = ReactDOM.createRoot(\r\n  document.getElementById('root') as HTMLElement\r\n);\r\nroot.render(\r\n  // <React.StrictMode>\r\n  <App />\r\n  // </React.StrictMode>\r\n);\r\n"],"sourceRoot":""}